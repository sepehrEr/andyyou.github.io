<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>穠纖合度的整合 Rails、Webpack、Vuejs | DEVLOG of andyyou</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="前言如果您曾經閱讀過小弟的vue + webpack 起手式一文，裡面我曾提到關於容易與傳統 MVC 框架(Rails, ASP.NET MVC)等結合。這篇文章主要就是用來介紹其作法與為什麼我會這麼說。
我先承認吧！我不總是需要使用 SPA 的架構  雖然它很好，但對於很多小型專案，或者我們應該說 UI/UX 設計本身非常單純的專案 - 殺雞焉用牛刀。所以這邊文章的作法針對的是那些專案不是使用">
<meta property="og:type" content="article">
<meta property="og:title" content="穠纖合度的整合 Rails、Webpack、Vuejs">
<meta property="og:url" content="//andyyou.github.io/2016/11/07/integrate-rails-webpack-vue/index.html">
<meta property="og:site_name" content="DEVLOG of andyyou">
<meta property="og:description" content="前言如果您曾經閱讀過小弟的vue + webpack 起手式一文，裡面我曾提到關於容易與傳統 MVC 框架(Rails, ASP.NET MVC)等結合。這篇文章主要就是用來介紹其作法與為什麼我會這麼說。
我先承認吧！我不總是需要使用 SPA 的架構  雖然它很好，但對於很多小型專案，或者我們應該說 UI/UX 設計本身非常單純的專案 - 殺雞焉用牛刀。所以這邊文章的作法針對的是那些專案不是使用">
<meta property="og:updated_time" content="2016-12-19T02:36:44.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="穠纖合度的整合 Rails、Webpack、Vuejs">
<meta name="twitter:description" content="前言如果您曾經閱讀過小弟的vue + webpack 起手式一文，裡面我曾提到關於容易與傳統 MVC 框架(Rails, ASP.NET MVC)等結合。這篇文章主要就是用來介紹其作法與為什麼我會這麼說。
我先承認吧！我不總是需要使用 SPA 的架構  雖然它很好，但對於很多小型專案，或者我們應該說 UI/UX 設計本身非常單純的專案 - 殺雞焉用牛刀。所以這邊文章的作法針對的是那些專案不是使用">
    

    

    
        <link rel="icon" href="/images/favicon.png" />
    

    <link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/lib/open-sans/styles.css">
    <link rel="stylesheet" href="/lib/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/lib/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/lib/lightgallery/css/lightgallery.min.css">
    
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-39208536-1', 'auto');
ga('send', 'pageview');

</script>
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">DEVLOG of andyyou</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="https://avatars2.githubusercontent.com/u/665690?v=3&amp;s=466" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜尋" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: 'Pages',
            CATEGORIES: '分類',
            TAGS: '標籤',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜尋" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="https://avatars2.githubusercontent.com/u/665690?v=3&amp;s=466" />
            <h2 id="name">andyyou</h2>
            <h3 id="title">Web Developer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Taipei, Taiwan</span>
            <a id="follow" target="_blank" href="https://github.com/andyyou">關注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                145
                <span>文章</span>
            </div>
            <div class="article-info-block">
                56
                <span>標籤</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/andyyou" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://www.linkedin.com/pub/zongyan-you/2a/493/16" target="_blank" title="linkedin" class=tooltip>
                            <i class="fa fa-linkedin"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-integrate-rails-webpack-vue" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            穠纖合度的整合 Rails、Webpack、Vuejs
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2016/11/07/integrate-rails-webpack-vue/">
            <time datetime="2016-11-07T10:41:37.000Z" itemprop="datePublished">2016-11-07</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Program/">Program</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/RoR/">RoR</a>, <a class="tag-link" href="/tags/javascript/">javascript</a>, <a class="tag-link" href="/tags/nodejs/">nodejs</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>如果您曾經閱讀過小弟的<a href="https://segmentfault.com/a/1190000005363030?_ea=1303942" target="_blank" rel="external">vue + webpack 起手式</a>一文，裡面我曾提到關於容易與傳統 MVC 框架(Rails, ASP.NET MVC)等結合。這篇文章主要就是用來介紹其作法與為什麼我會這麼說。</p>
<p>我先承認吧！我不總是需要使用 SPA 的架構  雖然它很好，但對於很多小型專案，或者我們應該說 UI/UX 設計本身非常單純的專案 - 殺雞焉用牛刀。所以這邊文章的作法針對的是那些專案<code>不是</code>使用 SPA 搭配 API 的架構的人，而是您覺得既有的 MVC 框架對於您的需求開發已經非常足夠且想保留大多數這些框架提供的功能（本文僅針對 Rails 介紹）。</p>
<p>網路上有非常多關於 Rails 與 Webpack 整合的方式，其實都非常不錯。而關於本文只是介紹其中一種小弟認為<code>剛剛好</code>的整合方式，其中許多觀念都不是新創的，都只是整理過去學習經驗而成。</p>
<a id="more"></a>
<h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><p>先談談我們的需求與為什麼不使用 asset pipeline，其實簡單來說就是下面列表這些：</p>
<ul>
<li>我們想使用 ES2015 等新支援的語法，需要 Babel。</li>
<li>許多套件在 bower 上面編譯後的版本並不完整、不支援、或者有其他問題導致我們需要使用 npm。</li>
<li>我們想透過模組來管理相依性的問題。</li>
<li>assets-org 和 gem 對於管理前端資源包來說並不是那麼優秀。</li>
<li>部署希望能夠盡可能單純一點。</li>
</ul>
<h1 id="準備"><a href="#準備" class="headerlink" title="準備"></a>準備</h1><p>大體來說這種整合的架構使用 npm (yarn 也可) 來管理前端的資源，gem 則只負責後端部分。</p>
<ul>
<li>安裝 nodejs 與 npm</li>
<li>安裝 ruby 與 Rails</li>
<li>安裝 Postgre SQL(由於會示範部署至 Heroku 所以使用 Postgre SQL)</li>
</ul>
<h1 id="第一步-建立專案"><a href="#第一步-建立專案" class="headerlink" title="第一步 - 建立專案"></a>第一步 - 建立專案</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 由於示範部署至 Heroku</span></div><div class="line"><span class="comment"># 因此無法使用 sqlite3</span></div><div class="line">$ rails _5.0.0.1_ new [project_name] --database postgresql</div><div class="line">$ <span class="built_in">cd</span> [project_name]</div><div class="line">$ bundle install</div><div class="line">$ rails db:create</div><div class="line"></div><div class="line">$ rails g controller pages index <span class="comment"># 建立測試頁面</span></div><div class="line">$ rails server <span class="comment"># 完成建立一個 Rails 專案</span></div><div class="line"><span class="comment"># 開啟 http://localhost:3000/pages/index</span></div></pre></td></tr></table></figure>
<ul>
<li>導入 npm</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">$ npm init --yes</div><div class="line"></div><div class="line"><span class="comment"># 過程中，如果需要測試一下 webpack 指令則需要安裝全域</span></div><div class="line">$ npm i -g webpack webpack-dev-server</div><div class="line"></div><div class="line"><span class="comment"># 安裝所需的前端函式庫</span></div><div class="line">$ npm i jquery@^2.1.4 -S</div><div class="line">$ npm i jquery-ujs@~1.1.0-1 -S</div><div class="line">$ npm i lodash@~3.0.0 -S</div><div class="line">$ npm i vue -S</div><div class="line"></div><div class="line"><span class="comment"># 安裝開發環境所需的套件與函式庫</span></div><div class="line">$ npm i webpack \</div><div class="line">    webpack-dev-server \</div><div class="line">    webpack-manifest-plugin \</div><div class="line">    extract-text-webpack-plugin -D</div><div class="line"></div><div class="line">$ npm i babel-core \</div><div class="line">    babel-loader babel-runtime \</div><div class="line">    babel-plugin-transform-runtime \</div><div class="line">    babel-preset-es2015 -D <span class="comment"># Babel 相關</span></div><div class="line"></div><div class="line">$ npm i coffee-loader coffee-script -D</div><div class="line"></div><div class="line">$ npm i css-loader \</div><div class="line">    style-loader \</div><div class="line">    node-sass \</div><div class="line">    sass-loader -D</div><div class="line"></div><div class="line">$ npm i exports-loader -D <span class="comment"># 匯出檔案</span></div><div class="line">$ npm i expose-loader -D <span class="comment"># 將物件加到全域(Javascript)</span></div><div class="line">$ npm i file-loader url-loader -D</div><div class="line">$ npm i imports-loader -D <span class="comment"># 使用的模組可相依於全域</span></div></pre></td></tr></table></figure>
<p>為了方便您快速安裝下面提供 <code>package.json</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">"dependencies": &#123;</div><div class="line">  "jquery": "^2.2.4",</div><div class="line">  "jquery-ujs": "^1.1.0-1",</div><div class="line">  "lodash": "^3.0.1",</div><div class="line">  "vue": "^2.0.5"</div><div class="line">&#125;,</div><div class="line">"devDependencies": &#123;</div><div class="line">  "babel-core": "^6.18.2",</div><div class="line">  "babel-loader": "^6.2.7",</div><div class="line">  "babel-plugin-transform-runtime": "^6.15.0",</div><div class="line">  "babel-preset-es2015": "^6.18.0",</div><div class="line">  "babel-runtime": "^6.18.0",</div><div class="line">  "coffee-loader": "^0.7.2",</div><div class="line">  "coffee-script": "^1.11.1",</div><div class="line">  "css-loader": "^0.25.0",</div><div class="line">  "exports-loader": "^0.6.3",</div><div class="line">  "expose-loader": "^0.7.1",</div><div class="line">  "extract-text-webpack-plugin": "^1.0.1",</div><div class="line">  "file-loader": "^0.9.0",</div><div class="line">  "imports-loader": "^0.6.5",</div><div class="line">  "node-sass": "^3.11.2",</div><div class="line">  "sass-loader": "^4.0.2",</div><div class="line">  "style-loader": "^0.13.1",</div><div class="line">  "url-loader": "^0.5.7",</div><div class="line">  "webpack": "^1.13.3",</div><div class="line">  "webpack-dev-server": "^1.16.2",</div><div class="line">  "webpack-manifest-plugin": "^1.1.0"</div><div class="line">&#125;,</div><div class="line">"babel": &#123;</div><div class="line">  "presets": [</div><div class="line">    "es2015"</div><div class="line">  ],</div><div class="line">  "plugins": [</div><div class="line">    [</div><div class="line">      "transform-runtime",</div><div class="line">      &#123;</div><div class="line">        "polyfill": false,</div><div class="line">        "regenerator": true</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="第二步-組織架構"><a href="#第二步-組織架構" class="headerlink" title="第二步 - 組織架構"></a>第二步 - 組織架構</h1><p>為了讓部署與後續設定單純一點，我們選擇將 javascript 和 css 的資源檔抽出原本的目錄，並同時也保留 Rails 預設的相關功能。大略的架構會如下，我們會將所有的前端資源放在 <code>client</code> 目錄底下，當然您要取名叫 <code>webpack</code> 或 <code>frontend</code> 也都是OK的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">├── /app</div><div class="line">│   ├── /assets</div><div class="line">│   ├── /controllers</div><div class="line">│   ├── /views</div><div class="line">│   └── ...</div><div class="line">├── /bin</div><div class="line">├── /config</div><div class="line">├── /db</div><div class="line">├── /public</div><div class="line">├── ...</div><div class="line">├── /client</div><div class="line">│   ├── /fonts</div><div class="line">│   ├── /images</div><div class="line">│   ├── /javascripts</div><div class="line">│   ├── /stylesheets</div><div class="line">│   ├── development.config.js</div><div class="line">│   ├── production.config.js</div><div class="line">└── ...</div></pre></td></tr></table></figure>
<p>除非您是指令控，不然您可以就使用編輯器建立相關檔案與目錄</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$ mkdir -p client/javascripts</div><div class="line">$ mkdir client/fonts</div><div class="line">$ mkdir client/images</div><div class="line">$ mkdir client/stylesheets</div><div class="line"><span class="comment"># 新增 Entry Point 檔案</span></div><div class="line">$ touch client/javascripts/application.js</div><div class="line">$ touch client/javascripts/home.coffee <span class="comment"># 測試 coffee 使用</span></div><div class="line">$ touch client/fonts/.keep</div><div class="line">$ touch client/images/.keep</div><div class="line">$ touch client/stylesheets/home.scss</div><div class="line"></div><div class="line">$ touch client/development.config.js</div><div class="line">$ touch client/production.config.js</div></pre></td></tr></table></figure>
<p>注意因為這個專案會有 Nodejs 混入，所以您應該要在 <code>.gitignore</code> 中增加相關的設定。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Node</span></div><div class="line">node_modules</div><div class="line">jspm_packages</div><div class="line">.npm</div><div class="line">.eslintcache</div><div class="line">npm-debug.log*</div><div class="line">pids</div><div class="line">*.pid</div><div class="line">*.seed</div><div class="line">*.pid.lock</div><div class="line">.nyc_output</div><div class="line">.grunt</div><div class="line">.lock-wscript</div><div class="line">build/Release</div></pre></td></tr></table></figure>
<h3 id="簡易的驗證範例"><a href="#簡易的驗證範例" class="headerlink" title="簡易的驗證範例"></a>簡易的驗證範例</h3><ul>
<li>javascripts/home.coffee</li>
</ul>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log <span class="string">"Hello, CoffeeScript!"</span></div></pre></td></tr></table></figure>
<ul>
<li>stylesheets/home.scss</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* 記得放一張圖片 */</span></div><div class="line"><span class="selector-class">.home-banner</span> &#123;</div><div class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'../images/banner.png'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>javascripts/application.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">'../stylesheets/home.scss'</span></div><div class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'./home'</span></div></pre></td></tr></table></figure>
<h1 id="第三步-配置-webpack"><a href="#第三步-配置-webpack" class="headerlink" title="第三步 - 配置 webpack"></a>第三步 - 配置 webpack</h1><h3 id="development-config-js"><a href="#development-config-js" class="headerlink" title="development.config.js"></a>development.config.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</div><div class="line"><span class="keyword">var</span> _ = <span class="built_in">require</span>(<span class="string">'lodash'</span>)</div><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</div><div class="line"><span class="keyword">var</span> assetsPath = path.join(__dirname, <span class="string">'..'</span>, <span class="string">'public'</span>, <span class="string">'assets'</span>)</div><div class="line"><span class="keyword">var</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>)</div><div class="line"></div><div class="line"><span class="keyword">var</span> config = &#123;</div><div class="line">  <span class="attr">context</span>: path.join(__dirname, <span class="string">'..'</span>),</div><div class="line">  <span class="attr">entry</span>: &#123;</div><div class="line">    <span class="comment">/* 定義進入點與其檔案名稱 */</span></div><div class="line">    application: [</div><div class="line">      path.join(__dirname, <span class="string">'/javascripts/application.js'</span>)</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">path</span>: assetsPath,</div><div class="line">    <span class="attr">filename</span>: <span class="string">'[name]-bundle.js'</span>,</div><div class="line">    <span class="attr">publicPath</span>: <span class="string">'/assets/'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">resolve</span>: &#123;</div><div class="line">    <span class="attr">extensions</span>: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.coffee'</span>, <span class="string">'.json'</span>]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">debug</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">displayErrorDetails</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">outputPathinfo</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">devtool</span>: <span class="string">'cheap-module-eval-source-map'</span>,</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="built_in">require</span>.resolve(<span class="string">'jquery'</span>),</div><div class="line">        <span class="attr">loader</span>: <span class="string">'expose?jQuery'</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="built_in">require</span>.resolve(<span class="string">'jquery'</span>),</div><div class="line">        <span class="attr">loader</span>: <span class="string">'expose?$'</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</div><div class="line">        <span class="attr">loader</span>: <span class="string">'babel'</span>,</div><div class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.coffee$/</span>,</div><div class="line">        <span class="attr">loader</span>: <span class="string">'coffee'</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.(woff|woff2|eot|ttf|otf)\??.*$/</span>,</div><div class="line">        <span class="attr">loader</span>: <span class="string">'url?limit=8192&amp;name=[name].[ext]'</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.(jpe?g|png|gif|svg)\??.*$/</span>,</div><div class="line">        <span class="attr">loader</span>: <span class="string">'url?limit=8192&amp;name=[name].[ext]'</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</div><div class="line">        <span class="attr">loader</span>: ExtractTextPlugin.extract(<span class="string">'style'</span>, <span class="string">'css'</span>)</div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</div><div class="line">        <span class="attr">loader</span>: ExtractTextPlugin.extract(<span class="string">'style'</span>, <span class="string">'css!sass'</span>)</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">plugins</span>: [</div><div class="line">    <span class="keyword">new</span> webpack.ProvidePlugin(&#123;</div><div class="line">      <span class="attr">$</span>: <span class="string">'jquery'</span>,</div><div class="line">      <span class="attr">jQuery</span>: <span class="string">'jquery'</span></div><div class="line">    &#125;),</div><div class="line">    <span class="keyword">new</span> ExtractTextPlugin(<span class="string">'[name]-bundle.css'</span>, &#123;</div><div class="line">      <span class="attr">allChunks</span>: <span class="literal">true</span></div><div class="line">    &#125;)</div><div class="line">  ]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = config</div></pre></td></tr></table></figure>
<h3 id="production-config-js"><a href="#production-config-js" class="headerlink" title="production.config.js"></a>production.config.js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</div><div class="line"><span class="keyword">var</span> _ = <span class="built_in">require</span>(<span class="string">'lodash'</span>)</div><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</div><div class="line"><span class="keyword">var</span> assetsPath = path.join(__dirname, <span class="string">'..'</span>, <span class="string">'public'</span>, <span class="string">'assets'</span>)</div><div class="line"><span class="keyword">var</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>)</div><div class="line"><span class="keyword">var</span> ManifestPlugin = <span class="built_in">require</span>(<span class="string">'webpack-manifest-plugin'</span>)</div><div class="line"></div><div class="line"><span class="keyword">var</span> config = &#123;</div><div class="line">  <span class="attr">context</span>: path.join(__dirname, <span class="string">'..'</span>),</div><div class="line">  <span class="attr">entry</span>: &#123;</div><div class="line">    <span class="attr">application</span>: path.join(__dirname, <span class="string">'/javascripts/application.js'</span>)</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">path</span>: assetsPath,</div><div class="line">    <span class="attr">filename</span>: <span class="string">'[name]-bundle-[chunkhash].js'</span>,</div><div class="line">    <span class="attr">publicPath</span>: <span class="string">'/assets/'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">resolve</span>: &#123;</div><div class="line">    <span class="attr">extensions</span>: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.coffee'</span>, <span class="string">'.json'</span>]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">debug</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">displayErrorDetails</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">outputPathinfo</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">devtool</span>: <span class="string">'cheap-module-eval-source-map'</span>,</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="built_in">require</span>.resolve(<span class="string">'jquery'</span>),</div><div class="line">        <span class="attr">loader</span>: <span class="string">'expose?jQuery'</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="built_in">require</span>.resolve(<span class="string">'jquery'</span>),</div><div class="line">        <span class="attr">loader</span>: <span class="string">'expose?$'</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</div><div class="line">        <span class="attr">loader</span>: <span class="string">'babel'</span>,</div><div class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.coffee$/</span>,</div><div class="line">        <span class="attr">loader</span>: <span class="string">'coffee'</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.(woff|woff2|eot|ttf|otf)\??.*$/</span>,</div><div class="line">        <span class="attr">loader</span>: <span class="string">'url?limit=8192&amp;name=[name]-[hash].[ext]'</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.(jpe?g|png|gif|svg)\??.*$/</span>,</div><div class="line">        <span class="attr">loader</span>: <span class="string">'url?limit=8192&amp;name=[name]-[hash].[ext]'</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</div><div class="line">        <span class="attr">loader</span>: ExtractTextPlugin.extract(<span class="string">'style'</span>, <span class="string">'css'</span>)</div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</div><div class="line">        <span class="attr">loader</span>: ExtractTextPlugin.extract(<span class="string">'style'</span>, <span class="string">'css!sass'</span>)</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">plugins</span>: [</div><div class="line">    <span class="keyword">new</span> webpack.ProvidePlugin(&#123;</div><div class="line">      <span class="attr">$</span>: <span class="string">'jquery'</span>,</div><div class="line">      <span class="attr">jQuery</span>: <span class="string">'jquery'</span></div><div class="line">    &#125;),</div><div class="line">    <span class="keyword">new</span> ExtractTextPlugin(<span class="string">'[name]-bundle-[chunkhash].css'</span>, &#123;</div><div class="line">      <span class="attr">allChunks</span>: <span class="literal">true</span></div><div class="line">    &#125;),</div><div class="line">    <span class="keyword">new</span> ManifestPlugin(&#123;</div><div class="line">      <span class="attr">fileName</span>: <span class="string">'client_manifest.json'</span></div><div class="line">    &#125;)</div><div class="line">  ]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = config</div></pre></td></tr></table></figure>
<p>完成之後執行，測試看看是否有地方錯誤。如果您對於 webpack 並不陌生可以閱讀設定檔理解一下。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ webpack --config client/development.config.js</div><div class="line">$ webpack --config client/production.config.js</div></pre></td></tr></table></figure>
<p>查看 <code>public/assets</code> 目錄底下看看編譯的結果。</p>
<h1 id="第四步-整合-Rails"><a href="#第四步-整合-Rails" class="headerlink" title="第四步 - 整合 Rails"></a>第四步 - 整合 Rails</h1><p>到此您應該已經理解，我們就是將前端的部份交給 webpack 處理，然後遵循 Rails 的架構將最終的資源檔編譯輸出到 <code>public/assets</code> 。</p>
<p>現在的問題是，我們該如何讀取編譯好的資源呢？</p>
<p>由於我們希望能夠盡可能的遵循 Rails 的慣例，因此下一步我們在  <code>app/views/layouts/application.html.erb</code> 放入</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">%=</span> <span class="attr">client_stylesheet_link_tag</span> '<span class="attr">application</span>' %&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">%=</span> <span class="attr">client_javascript_include_tag</span> '<span class="attr">application</span>' %&gt;</span></div></pre></td></tr></table></figure>
<p>上面是我們希望的作法（看起來就像是預設支援），所以接著下來我們需要做一些修改好讓 Rails 支援上面兩個 helpers。</p>
<p>首先因為 webpack 加上 hash 的編譯結果，Rails 並無法得知對應的檔案。於是我們需要在 production.config.js 使用 <code>ManifestPlugin</code> 匯出 <code>manifest</code> 讓 Rails 得知如何對應檔案。</p>
<ul>
<li>config/application.rb</li>
</ul>
<figure class="highlight rb"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">require_relative <span class="string">'boot'</span></div><div class="line"></div><div class="line"><span class="keyword">require</span> <span class="string">'rails/all'</span></div><div class="line"></div><div class="line">Bundler.<span class="keyword">require</span>(*Rails.groups)</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">module</span> <span class="title">RailsWepback</span></span></div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Application</span> &lt; Rails::Application</span></div><div class="line">    config.webpack = &#123;</div><div class="line">      <span class="symbol">asset_manifest:</span> &#123;&#125;</div><div class="line">    &#125;</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<ul>
<li>新增 config/initializers/webpack.rb</li>
</ul>
<figure class="highlight rb"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">asset_manifest = Rails.root.join(<span class="string">'public'</span>, <span class="string">'assets'</span>, <span class="string">'client_manifest.json'</span>)</div><div class="line"></div><div class="line"><span class="keyword">if</span> File.exist?(asset_manifest)</div><div class="line">  Rails.configuration.webpack[<span class="symbol">:manifest</span>] = JSON.parse(</div><div class="line">    File.read(asset_manifest)</div><div class="line">  ).with_indifferent_access</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>完成這些前置作業之後我們可以讀取到 <code>manifest</code> 了，但您知道的；原生的 Rails 並沒有剛剛那兩個 helpers ，我們需要在 <code>app/helplers/application_helper.rb</code> 加上</p>
<figure class="highlight rb"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">client_javascript_include_tag</span><span class="params">(name)</span></span></div><div class="line">  filename = <span class="string">"<span class="subst">#&#123;name&#125;</span>-bundle.js"</span></div><div class="line">  asset_url = Rails.application.config.asset_host</div><div class="line">  src = <span class="string">"<span class="subst">#&#123;asset_url&#125;</span>/assets/<span class="subst">#&#123;filename&#125;</span>"</span></div><div class="line"></div><div class="line">  <span class="keyword">if</span> Rails.env.development?</div><div class="line">  <span class="keyword">elsif</span> Rails.configuration.webpack[<span class="symbol">:manifest</span>]</div><div class="line">    asset_name = Rails.configuration.webpack[<span class="symbol">:manifest</span>][<span class="string">"<span class="subst">#&#123;name&#125;</span>.js"</span>]</div><div class="line">    <span class="keyword">if</span> asset_name</div><div class="line">      src = <span class="string">"<span class="subst">#&#123;asset_url&#125;</span>/assets/<span class="subst">#&#123;asset_name&#125;</span>"</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line">  <span class="string">"&lt;script src=\"<span class="subst">#&#123;src&#125;</span>\"&gt;&lt;/script&gt;"</span>.html_safe</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">client_stylesheet_link_tag</span><span class="params">(name)</span></span></div><div class="line">  filename = <span class="string">"<span class="subst">#&#123;name&#125;</span>-bundle.css"</span></div><div class="line">  asset_url = Rails.application.config.asset_host</div><div class="line">  src = <span class="string">"<span class="subst">#&#123;asset_url&#125;</span>/assets/<span class="subst">#&#123;filename&#125;</span>"</span></div><div class="line"></div><div class="line">  <span class="keyword">if</span> Rails.env.development?</div><div class="line">  <span class="keyword">elsif</span> Rails.configuration.webpack[<span class="symbol">:manifest</span>]</div><div class="line">    asset_name = Rails.configuration.webpack[<span class="symbol">:manifest</span>][<span class="string">"<span class="subst">#&#123;name&#125;</span>.css"</span>]</div><div class="line">    <span class="keyword">if</span> asset_name</div><div class="line">      src = <span class="string">"<span class="subst">#&#123;asset_url&#125;</span>/assets/<span class="subst">#&#123;asset_name&#125;</span>"</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line">  <span class="string">"&lt;link rel=\"stylesheet\" href=\"<span class="subst">#&#123;src&#125;</span>\"&gt;"</span>.html_safe</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>這上面的 <code>asset_host</code> 是為了讓事情單純一點，我們選擇在 <code>config/environments/development.rb</code> 和 <code>production.rb</code> 加上</p>
<figure class="highlight rb"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 路徑請依據實際的狀況調整</span></div><div class="line">config.action_controller.asset_host = <span class="string">'127.0.0.1:3000'</span></div></pre></td></tr></table></figure>
<p>您可以採取任何您覺得更好的方式取得路徑。</p>
<h1 id="完成第一階段"><a href="#完成第一階段" class="headerlink" title="完成第一階段"></a>完成第一階段</h1><p>到這一步，其實我們已經完成最上面我們列出的需求了。</p>
<p>先在 terminal 中執行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ webpack --config client/development.config.js --watch</div></pre></td></tr></table></figure>
<p>開啟另一個 session 執行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ rails server</div></pre></td></tr></table></figure>
<p>最後在 <code>views/pages/index.html.erb</code> 中的任一 tag 補上 <code>class=&quot;home-banner&quot;</code> 您就可以觀察到變化。webpack 在背後一直觀察 <code>client</code> 底下檔案的變化，Rails 的開發伺服器則負責原來的工作，載入那些編譯後的檔案。</p>
<p>只是這樣每一次要測試都要打兩條指令很麻煩。</p>
<h1 id="優化開發指令"><a href="#優化開發指令" class="headerlink" title="優化開發指令"></a>優化開發指令</h1><ul>
<li>新增 npm scripts</li>
</ul>
<p>再往下走之前，我們可以先把 webpack 的指令與其單配的參數先整理到 <code>npm script</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">"scripts": &#123;</div><div class="line">  "build:dev": "webpack --config=client/development.config.js --display-reasons --display-chunks --progress --color --watch",</div><div class="line">  "build": "webpack --config=client/production.config.js -p"</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>接著為了讓我們往後只使用一道指令就能夠輕鬆寫意的開發。最簡單的方式就是使用 <code>foreman</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ gem install foreman</div></pre></td></tr></table></figure>
<p>安裝完 foreman 之後我們需要設定 <code>Procfile</code> 讓其為我們同時啟動兩道指令。</p>
<ul>
<li>新增 Procfile.dev</li>
</ul>
<p><code>Procfile support</code> 類型程式預設使用 <code>Procfile</code> 為設定檔，如果直接使用該檔案可能會遇到問題，例如：當我們要使用 Heroku 的話，後續可能在部署的時候產生問題，主要是目前的設定僅限於開發階段使用，於是我們改使用其他的檔名 <code>Procfile.dev</code>。</p>
<p>在專案跟目錄下新增 <code>Procfile.dev</code></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attr">web:</span> bundle exec rails server -p <span class="number">3000</span></div><div class="line"><span class="attr">webpack:</span> npm run build:dev</div></pre></td></tr></table></figure>
<ul>
<li>使用 foreman</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ foreman s <span class="_">-f</span> Procfile.dev</div></pre></td></tr></table></figure>
<p>啟動後您應該看到類似的訊息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">18:30:56 web.1     | started with pid 16693</div><div class="line">18:30:56 webpack.1 | started with pid 16694</div><div class="line">18:30:57 webpack.1 |</div><div class="line">18:30:57 webpack.1 | &gt; example@1.0.0 build:dev /Users/andyyou/Workspace/sandbox/rails_vuejs_integrate_1/example</div><div class="line">18:30:57 webpack.1 | &gt; webpack --config=client/development.config.js --display-reasons --display-chunks --progress --color --watch</div><div class="line">18:30:57 webpack.1 |</div><div class="line">Hash: 2fdcbe01c557b347442e</div><div class="line">18:31:00 web.1     | =&gt; Booting Puma</div><div class="line">18:31:00 webpack.1 | Version: webpack 1.13.3</div><div class="line">18:31:00 web.1     | =&gt; Rails 5.0.0.1 application starting <span class="keyword">in</span> development on http://localhost:3000</div><div class="line">18:31:00 webpack.1 | Time: 2893ms</div></pre></td></tr></table></figure>
<h1 id="支援-Hot-Reload"><a href="#支援-Hot-Reload" class="headerlink" title="支援 Hot Reload"></a>支援 Hot Reload</h1><p>基本上到了上一步就已經可以滿足大多數的開發情境，不過您可能也聽多了關於 Hot Replacement Mode (HRM) 的優點，如果我們也想支援呢？</p>
<p>原理上很單純，我們只需要讓前端資源檔換成是由 webpack-dev-server 所提供即可。</p>
<ul>
<li>新增 devserver.config.js</li>
</ul>
<p>注意到基本上這邊只有加入 <code>webpack/hot/dev-server</code> 和 <code>publicPath</code> 不同的差異，可以有更精簡的方式，不過這邊為了讓之後維護比較明顯直覺一點所以將其獨立一個檔案：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</div><div class="line"><span class="keyword">var</span> _ = <span class="built_in">require</span>(<span class="string">'lodash'</span>)</div><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</div><div class="line"><span class="keyword">var</span> assetsPath = path.join(__dirname, <span class="string">'..'</span>, <span class="string">'public'</span>, <span class="string">'assets'</span>)</div><div class="line"><span class="keyword">var</span> ExtractTextPlugin = <span class="built_in">require</span>(<span class="string">'extract-text-webpack-plugin'</span>)</div><div class="line"></div><div class="line"><span class="keyword">var</span> config = &#123;</div><div class="line">  <span class="attr">context</span>: path.join(__dirname, <span class="string">'..'</span>),</div><div class="line">  <span class="attr">entry</span>: &#123;</div><div class="line">    <span class="attr">application</span>: [</div><div class="line">      <span class="string">'webpack/hot/dev-server'</span>,</div><div class="line">      path.join(__dirname, <span class="string">'/javascripts/application.js'</span>)</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">path</span>: assetsPath,</div><div class="line">    <span class="attr">filename</span>: <span class="string">'[name]-bundle.js'</span>,</div><div class="line">    <span class="attr">publicPath</span>: <span class="string">'http://localhost:8080/assets/'</span></div><div class="line">    <span class="comment">/* publicPath: '/assets/' */</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">resolve</span>: &#123;</div><div class="line">    <span class="attr">extensions</span>: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.coffee'</span>, <span class="string">'.json'</span>]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">debug</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">displayErrorDetails</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">outputPathinfo</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">devtool</span>: <span class="string">'cheap-module-eval-source-map'</span>,</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="built_in">require</span>.resolve(<span class="string">'jquery'</span>),</div><div class="line">        <span class="attr">loader</span>: <span class="string">'expose?jQuery'</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="built_in">require</span>.resolve(<span class="string">'jquery'</span>),</div><div class="line">        <span class="attr">loader</span>: <span class="string">'expose?$'</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</div><div class="line">        <span class="attr">loader</span>: <span class="string">'babel'</span>,</div><div class="line">        <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.coffee$/</span>,</div><div class="line">        <span class="attr">loader</span>: <span class="string">'coffee'</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.(woff|woff2|eot|ttf|otf)\??.*$/</span>,</div><div class="line">        <span class="attr">loader</span>: <span class="string">'url?limit=8192&amp;name=[name].[ext]'</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.(jpe?g|png|gif|svg)\??.*$/</span>,</div><div class="line">        <span class="attr">loader</span>: <span class="string">'url?limit=8192&amp;name=[name].[ext]'</span></div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</div><div class="line">        <span class="attr">loader</span>: ExtractTextPlugin.extract(<span class="string">'style'</span>, <span class="string">'css'</span>)</div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,</div><div class="line">        <span class="attr">loader</span>: ExtractTextPlugin.extract(<span class="string">'style'</span>, <span class="string">'css!sass'</span>)</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">plugins</span>: [</div><div class="line">    <span class="keyword">new</span> webpack.ProvidePlugin(&#123;</div><div class="line">      <span class="attr">$</span>: <span class="string">'jquery'</span>,</div><div class="line">      <span class="attr">jQuery</span>: <span class="string">'jquery'</span></div><div class="line">    &#125;),</div><div class="line">    <span class="keyword">new</span> ExtractTextPlugin(<span class="string">'[name]-bundle.css'</span>, &#123;</div><div class="line">      <span class="attr">allChunks</span>: <span class="literal">true</span></div><div class="line">    &#125;)</div><div class="line">  ]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = config</div></pre></td></tr></table></figure>
<ul>
<li>增加 npm scripts</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="string">"dev"</span>: <span class="string">"webpack-dev-server --config=client/devserver.config.js --inline --hot --no-info"</span></div></pre></td></tr></table></figure>
<ul>
<li>更新 app/helpers/application.rb</li>
</ul>
<p>因為目前有兩種開發模式，所以我們透過環境變數 <code>HRM=true</code> 來區分支不支援 HRM 模式。這邊遭遇的問題就單純是路徑不一樣，您絕對可自行調整優化，而這篇文章旨在記錄這個流程與概念。</p>
<figure class="highlight rb"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">client_javascript_include_tag</span><span class="params">(name)</span></span></div><div class="line">  filename = <span class="string">"<span class="subst">#&#123;name&#125;</span>-bundle.js"</span></div><div class="line">  asset_url = Rails.application.config.asset_host</div><div class="line">  src = <span class="string">"<span class="subst">#&#123;asset_url&#125;</span>/assets/<span class="subst">#&#123;filename&#125;</span>"</span></div><div class="line"></div><div class="line">  <span class="keyword">if</span> Rails.env.development?</div><div class="line">    <span class="keyword">if</span> ENV[<span class="string">"HRM"</span>]</div><div class="line">      src = <span class="string">"http://localhost:8080/assets/<span class="subst">#&#123;filename&#125;</span>"</span></div><div class="line">    <span class="keyword">else</span></div><div class="line">      src = src</div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">elsif</span> Rails.configuration.webpack[<span class="symbol">:manifest</span>]</div><div class="line">    asset_name = Rails.configuration.webpack[<span class="symbol">:manifest</span>][<span class="string">"<span class="subst">#&#123;name&#125;</span>.js"</span>]</div><div class="line">    <span class="keyword">if</span> asset_name</div><div class="line">      src = <span class="string">"<span class="subst">#&#123;asset_url&#125;</span>/assets/<span class="subst">#&#123;asset_name&#125;</span>"</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line">  <span class="string">"&lt;script src=\"<span class="subst">#&#123;src&#125;</span>\"&gt;&lt;/script&gt;"</span>.html_safe</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">client_stylesheet_link_tag</span><span class="params">(name)</span></span></div><div class="line">  filename = <span class="string">"<span class="subst">#&#123;name&#125;</span>-bundle.css"</span></div><div class="line">  asset_url = Rails.application.config.asset_host</div><div class="line">  src = <span class="string">"<span class="subst">#&#123;asset_url&#125;</span>/assets/<span class="subst">#&#123;filename&#125;</span>"</span></div><div class="line"></div><div class="line">  <span class="keyword">if</span> Rails.env.development?</div><div class="line">    <span class="keyword">if</span> ENV[<span class="string">"HRM"</span>]</div><div class="line">      src = <span class="string">"http://localhost:8080/assets/<span class="subst">#&#123;filename&#125;</span>"</span></div><div class="line">    <span class="keyword">else</span></div><div class="line">      src = src</div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">elsif</span> Rails.configuration.webpack[<span class="symbol">:manifest</span>]</div><div class="line">    asset_name = Rails.configuration.webpack[<span class="symbol">:manifest</span>][<span class="string">"<span class="subst">#&#123;name&#125;</span>.css"</span>]</div><div class="line">    <span class="keyword">if</span> asset_name</div><div class="line">      src = <span class="string">"<span class="subst">#&#123;asset_url&#125;</span>/assets/<span class="subst">#&#123;asset_name&#125;</span>"</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line">  <span class="string">"&lt;link rel=\"stylesheet\" href=\"<span class="subst">#&#123;src&#125;</span>\"&gt;"</span>.html_safe</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<ul>
<li>Procfile.devserver</li>
</ul>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attr">web:</span> bundle exec rails server -p <span class="number">3000</span></div><div class="line"><span class="attr">webpack:</span> npm run dev</div></pre></td></tr></table></figure>
<h3 id="使用指令"><a href="#使用指令" class="headerlink" title="使用指令"></a>使用指令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 平常開發模式</span></div><div class="line">$ foreman s <span class="_">-f</span> Procfile.dev</div><div class="line"></div><div class="line"><span class="comment"># 支援 Hot Reload</span></div><div class="line">$ HRM=<span class="literal">true</span> foreman start <span class="_">-f</span> Procfile.devserver</div><div class="line"></div><div class="line"><span class="comment"># Ctrl + C 中止</span></div></pre></td></tr></table></figure>
<h1 id="漸進式的-Vue-js-是-MVC-框架的好朋友"><a href="#漸進式的-Vue-js-是-MVC-框架的好朋友" class="headerlink" title="漸進式的 Vue.js 是 MVC 框架的好朋友"></a>漸進式的 Vue.js 是 MVC 框架的好朋友</h1><p>在 Javascript 當道的今天我想您很容易找到很多關於 SPA 的主流作法。但這篇文章要說明的是把 JS 當作配角的作法。</p>
<p>首先我們需要更新設定檔，使其支援主角 Vue.js v2</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm i vue-loader vue-hot-reload-api -D</div></pre></td></tr></table></figure>
<p>webpack 所有的 config loader 的部分補上：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">test</span>: <span class="regexp">/\.vue$/</span>,</div><div class="line">  <span class="attr">loader</span>: <span class="string">'vue'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>另外 resolve 的部分，因為我們需要 standalone 版本的功能所以需要下面設定：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">resolve: &#123;</div><div class="line">  <span class="attr">extensions</span>: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.coffee'</span>, <span class="string">'.json'</span>],</div><div class="line">  <span class="comment">/**</span></div><div class="line">   * Vue v2.x 之後 NPM Package 預設只會匯出 runtime-only 版本，若要使用 standalone 功能則需下列設定</div><div class="line">   */</div><div class="line">  alias: &#123;</div><div class="line">    <span class="attr">vue</span>: <span class="string">'vue/dist/vue.js'</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>首先新增元件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ mkdir client/javascripts/components</div><div class="line">$ touch client/javascripts/components/Car.vue</div></pre></td></tr></table></figure>
<ul>
<li>Car.vue 範例程式如下</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  data () &#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">brand</span>: <span class="string">'BMW 3 Series'</span>,</div><div class="line">      <span class="attr">mileage</span>: <span class="number">0</span></div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  mounted () &#123;</div><div class="line">    <span class="keyword">this</span>.handle = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">this</span>.mileage++</div><div class="line">    &#125;, <span class="number">1000</span>)</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  destroyed () &#123;</div><div class="line">    clearInterval(<span class="keyword">this</span>.handle)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"sass"</span> <span class="attr">scoped</span>&gt;</span><span class="undefined"></span></div><div class="line">$pink: pink;</div><div class="line"></div><div class="line">.brand &#123;</div><div class="line">  color: $pink;</div><div class="line">  font-size: 1.4em;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>更新 application.js</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">'../stylesheets/home.scss'</span></div><div class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'./home'</span></div><div class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></div><div class="line"><span class="keyword">import</span> Car <span class="keyword">from</span> <span class="string">'./components/Car.vue'</span></div><div class="line"></div><div class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">new</span> Vue(&#123;</div><div class="line">    <span class="attr">el</span>: <span class="string">'#app'</span>,</div><div class="line">    <span class="attr">data</span>: &#123;</div><div class="line">      <span class="attr">message</span>: <span class="string">'Hello, Rails with Vue.js'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">components</span>: &#123;</div><div class="line">      <span class="attr">car</span>: Car</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>app/views/pages/index.html.erb</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span> <span class="attr">v-cloak</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"home-banner"</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">car</span> <span class="attr">inline-template</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">      I am <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"brand"</span>&gt;</span>&#123;&#123; brand &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span>! I runned &#123;&#123; mileage &#125;&#125;.</div><div class="line">      The important thing is the variable from controller#action wheel is <span class="tag">&lt;<span class="name">%=</span> @<span class="attr">wheel</span> %&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">car</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>如果您曾使用過 Vue.js 可能會覺得這樣好奇怪，為什麼 component 裡面沒有 <code>&lt;template&gt;</code> 。 主要因為 Vue 有支援 <code>inline-template</code> 這種作法，這讓我們還可以延續使用從 controller action 來的資料，像是您想繼續使用 Rails 的 i18n 機制。</p>
<p>當然有人可能會說 template 抽到 views 那怎麼重複使用元件，使用 Rails 的 partial 就好了。</p>
<p>重點是這裡不是試圖提出一種萬靈丹，而是提供另一種思路，該怎麼樣使用取決於您的需求。</p>
<p>另外您也可以繼續使用 <code>slim</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">div id=&quot;app&quot; v-cloak=&quot;&quot;</div><div class="line">  car inline-template=&quot;&quot;</div><div class="line">    div</div><div class="line">        | &#123;&#123; message &#125;&#125;</div><div class="line">        = @wheel</div></pre></td></tr></table></figure>
<h1 id="部署至-Heroku"><a href="#部署至-Heroku" class="headerlink" title="部署至 Heroku"></a>部署至 Heroku</h1><p>很高興您能看到這一步，這個過程其實挺累人的。最後當我們完成這一系列的修改，我們還是希望能夠部署到一些方便的服務上，這邊就舉 Heroku 來示範。</p>
<p>第一步我們需要先在 <code>package.json</code> 補上一些設定，好讓 Heroku 在安裝完 Node 環境之後可以幫我們執行 <code>webpack</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">"scripts": &#123;</div><div class="line">  ...,</div><div class="line">  "heroku-postbuild": "npm run build"</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>部署</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ heroku login</div><div class="line">$ heroku create --app [your_app_name]</div><div class="line">$ heroku buildpacks:clear</div><div class="line">$ heroku buildpacks:<span class="built_in">set</span> heroku/nodejs</div><div class="line">$ heroku buildpacks:add heroku/ruby --index 2</div><div class="line"></div><div class="line"><span class="comment"># 安裝 package.json devDependencies 的部分</span></div><div class="line">$ heroku config:<span class="built_in">set</span> NPM_CONFIG_PRODUCTION=<span class="literal">false</span></div><div class="line">$ git push heroku master</div></pre></td></tr></table></figure>
<p>整體來說如果您有這些前端複雜的需求，使用 webpack 可能暫時是不錯的方式。<br>當然如果您有更優秀的作法也歡迎您給小弟一些建議。</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="//andyyou.github.io/2016/11/07/integrate-rails-webpack-vue/" data-id="cj10h3ifs00cxmzwxb4483pxo" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2016/12/05/vue-hook/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">上一篇</strong>
            <div class="article-nav-title">
                
                    Vue.js 由 1 到 2 的旅程 - (1)
                
            </div>
        </a>
    
    
        <a href="/2016/10/31/process-types-and-profile/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">Heroku 運行類別、 Procfile、常用指令筆記</div>
        </a>
    
</nav>


    
</article>


    
    <section id="comments">
    
    </section>

</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">分類</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Cloud/">Cloud</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Fun/">Fun</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mobile/">Mobile</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Program/">Program</a><span class="category-list-count">105</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/">System</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tools/">Tools</a><span class="category-list-count">15</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">歸檔</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">十二月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">十一月 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">十月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">九月 2014</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">八月 2014</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">二月 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">一月 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">十一月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">十月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">九月 2013</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">八月 2013</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">三月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/03/">三月 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/01/">一月 2012</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/11/">十一月 2011</a><span class="archive-list-count">3</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">標籤</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/net-mvc/">.net mvc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RoR/">RoR</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/api/">api</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aws/">aws</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/azure/">azure</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bot/">bot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bundler/">bundler</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cache/">cache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/carrier-wave/">carrier wave</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos/">centos</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chrome/">chrome</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cloudflare/">cloudflare</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/compass/">compass</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/devise/">devise</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/entity-framework/">entity framework</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/">es6</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/facebook/">facebook</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flux/">flux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/framework/">framework</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gulp/">gulp</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iisexpress/">iisexpress</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios/">ios</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">53</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jekyll/">jekyll</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jspm/">jspm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jwt/">jwt</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mechanism/">mechanism</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oocss/">oocss</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/osx/">osx</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/package-manager/">package manager</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/postgresql/">postgresql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rack-server/">rack server</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/raspberry-pi/">raspberry-pi</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-native/">react native</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reactjs/">reactjs</a><span class="tag-list-count">31</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redux/">redux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ruby/">ruby</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sass/">sass</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/selenium/">selenium</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/slim/">slim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssl/">ssl</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svg-javascript/">svg javascript</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/task-runner/">task runner</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/">windows</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xml/">xml</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">標籤雲</h3>
        <div class="widget tagcloud">
            <a href="/tags/net-mvc/" style="font-size: 10px;">.net mvc</a> <a href="/tags/RoR/" style="font-size: 17.27px;">RoR</a> <a href="/tags/api/" style="font-size: 10px;">api</a> <a href="/tags/aws/" style="font-size: 10px;">aws</a> <a href="/tags/azure/" style="font-size: 10.91px;">azure</a> <a href="/tags/bot/" style="font-size: 10px;">bot</a> <a href="/tags/bundler/" style="font-size: 10.91px;">bundler</a> <a href="/tags/cache/" style="font-size: 10px;">cache</a> <a href="/tags/carrier-wave/" style="font-size: 10.91px;">carrier wave</a> <a href="/tags/centos/" style="font-size: 10px;">centos</a> <a href="/tags/chrome/" style="font-size: 10px;">chrome</a> <a href="/tags/cloudflare/" style="font-size: 10px;">cloudflare</a> <a href="/tags/compass/" style="font-size: 10px;">compass</a> <a href="/tags/css/" style="font-size: 18.18px;">css</a> <a href="/tags/devise/" style="font-size: 10px;">devise</a> <a href="/tags/docker/" style="font-size: 10.91px;">docker</a> <a href="/tags/entity-framework/" style="font-size: 10px;">entity framework</a> <a href="/tags/es6/" style="font-size: 11.82px;">es6</a> <a href="/tags/facebook/" style="font-size: 10px;">facebook</a> <a href="/tags/flux/" style="font-size: 10px;">flux</a> <a href="/tags/framework/" style="font-size: 10.91px;">framework</a> <a href="/tags/grunt/" style="font-size: 12.73px;">grunt</a> <a href="/tags/gulp/" style="font-size: 11.82px;">gulp</a> <a href="/tags/heroku/" style="font-size: 11.82px;">heroku</a> <a href="/tags/html/" style="font-size: 10.91px;">html</a> <a href="/tags/iisexpress/" style="font-size: 10px;">iisexpress</a> <a href="/tags/ios/" style="font-size: 11.82px;">ios</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/jekyll/" style="font-size: 10.91px;">jekyll</a> <a href="/tags/jspm/" style="font-size: 10px;">jspm</a> <a href="/tags/jwt/" style="font-size: 10px;">jwt</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/mechanism/" style="font-size: 10px;">mechanism</a> <a href="/tags/mongodb/" style="font-size: 10.91px;">mongodb</a> <a href="/tags/nodejs/" style="font-size: 15.45px;">nodejs</a> <a href="/tags/oocss/" style="font-size: 10px;">oocss</a> <a href="/tags/osx/" style="font-size: 13.64px;">osx</a> <a href="/tags/package-manager/" style="font-size: 14.55px;">package manager</a> <a href="/tags/php/" style="font-size: 10.91px;">php</a> <a href="/tags/postgresql/" style="font-size: 10px;">postgresql</a> <a href="/tags/rack-server/" style="font-size: 10px;">rack server</a> <a href="/tags/raspberry-pi/" style="font-size: 10px;">raspberry-pi</a> <a href="/tags/react-native/" style="font-size: 10px;">react native</a> <a href="/tags/reactjs/" style="font-size: 19.09px;">reactjs</a> <a href="/tags/redux/" style="font-size: 10px;">redux</a> <a href="/tags/ruby/" style="font-size: 16.36px;">ruby</a> <a href="/tags/sass/" style="font-size: 10.91px;">sass</a> <a href="/tags/selenium/" style="font-size: 10px;">selenium</a> <a href="/tags/slim/" style="font-size: 10px;">slim</a> <a href="/tags/ssl/" style="font-size: 10px;">ssl</a> <a href="/tags/svg-javascript/" style="font-size: 11.82px;">svg javascript</a> <a href="/tags/task-runner/" style="font-size: 11.82px;">task runner</a> <a href="/tags/vuejs/" style="font-size: 13.64px;">vuejs</a> <a href="/tags/webpack/" style="font-size: 12.73px;">webpack</a> <a href="/tags/windows/" style="font-size: 10px;">windows</a> <a href="/tags/xml/" style="font-size: 10px;">xml</a>
        </div>
    </div>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 andyyou(You,ZongYan)
        </div>
    </div>
</footer>

        

    
        <script src="/lib/lightgallery/js/lightgallery.min.js"></script>
        <script src="/lib/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/lib/lightgallery/js/lg-pager.min.js"></script>
        <script src="/lib/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/lib/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/lib/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/lib/lightgallery/js/lg-hash.min.js"></script>
        <script src="/lib/lightgallery/js/lg-share.min.js"></script>
        <script src="/lib/lightgallery/js/lg-video.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>