<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>Webpack 筆記 | DEVLOG of andyyou</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="動機今時今日所謂的網站正進化成網路應用程式，它不再只是單純的顯示圖片文字資訊，而包含著更多互動與操作行為，同時也意味著一個網站:

具有更多的 Javascript
可以在現代的瀏覽器上做更多事
較少全頁重新載入的行為 ➞ 甚至更多程式碼在單一頁面">
<meta property="og:type" content="article">
<meta property="og:title" content="Webpack 筆記">
<meta property="og:url" content="http://andyyou.github.io/2015/07/23/webpack/index.html">
<meta property="og:site_name" content="DEVLOG of andyyou">
<meta property="og:description" content="動機今時今日所謂的網站正進化成網路應用程式，它不再只是單純的顯示圖片文字資訊，而包含著更多互動與操作行為，同時也意味著一個網站:

具有更多的 Javascript
可以在現代的瀏覽器上做更多事
較少全頁重新載入的行為 ➞ 甚至更多程式碼在單一頁面">
<meta property="og:image" content="http://webpack.github.io/assets/what-is-webpack.png">
<meta property="og:image" content="http://andyyou.github.io/2015/07/23/webpack/webpack-1.png">
<meta property="og:image" content="http://andyyou.github.io/2015/07/23/webpack/webpack-2.png">
<meta property="og:image" content="http://andyyou.github.io/2015/07/23/webpack/webpack-3.png">
<meta property="og:image" content="http://andyyou.github.io/2015/07/23/webpack/webpack-4.png">
<meta property="og:image" content="http://andyyou.github.io/2015/07/23/webpack/webpack-5.png">
<meta property="og:image" content="http://andyyou.github.io/2015/07/23/webpack/webpack-6.png">
<meta property="og:updated_time" content="2016-10-10T13:22:25.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Webpack 筆記">
<meta name="twitter:description" content="動機今時今日所謂的網站正進化成網路應用程式，它不再只是單純的顯示圖片文字資訊，而包含著更多互動與操作行為，同時也意味著一個網站:

具有更多的 Javascript
可以在現代的瀏覽器上做更多事
較少全頁重新載入的行為 ➞ 甚至更多程式碼在單一頁面">
<meta name="twitter:image" content="http://webpack.github.io/assets/what-is-webpack.png">
    

    

    
        <link rel="icon" href="/images/favicon.png" />
    

    <link rel="stylesheet" href="/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/vendor/open-sans/styles.css">
    <link rel="stylesheet" href="/vendor/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/vendor/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/vendor/lightgallery/css/lightgallery.min.css">
    
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-39208536-1', 'auto');
ga('send', 'pageview');

</script>
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">DEVLOG of andyyou</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="https://avatars2.githubusercontent.com/u/665690?v=3&amp;s=466" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜尋" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: 'Pages',
            CATEGORIES: '分類',
            TAGS: '標籤',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜尋" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="https://avatars2.githubusercontent.com/u/665690?v=3&amp;s=466" />
            <h2 id="name">andyyou</h2>
            <h3 id="title">Web Developer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Taipei, Taiwan</span>
            <a id="follow" target="_blank" href="https://github.com/andyyou">關注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                129
                <span>文章</span>
            </div>
            <div class="article-info-block">
                54
                <span>標籤</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/andyyou" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://www.linkedin.com/pub/zongyan-you/2a/493/16" target="_blank" title="linkedin" class=tooltip>
                            <i class="fa fa-linkedin"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-webpack" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            Webpack 筆記
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2015/07/23/webpack/">
            <time datetime="2015-07-23T00:30:00.000Z" itemprop="datePublished">2015-07-23</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Tools/">Tools</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/bundler/">bundler</a>, <a class="tag-link" href="/tags/javascript/">javascript</a>, <a class="tag-link" href="/tags/webpack/">webpack</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h1 id="動機"><a href="#動機" class="headerlink" title="動機"></a>動機</h1><p>今時今日所謂的網站正進化成網路應用程式，它不再只是單純的顯示圖片文字資訊，而包含著更多互動與操作行為，同時也意味著一個網站:</p>
<ul>
<li>具有更多的 Javascript</li>
<li>可以在現代的瀏覽器上做更多事</li>
<li>較少全頁重新載入的行為 ➞ 甚至更多程式碼在單一頁面<a id="more"></a>
其結果就是有更多程式碼出現在客戶端(Client side)<br>有大量的程式碼需要被組織化。模組化系統提供一種方式讓我們可以切割我們的程式碼使其變成個別的模組。</li>
</ul>
<blockquote>
<p>如果您是實作派的可以直接看 <code>跟著官方文件實作一遍</code> 下面除了官方入門，同時也搭配 Pete Hunt 的 webpack-how-to 實作一遍常用的功能</p>
</blockquote>
<h1 id="模組化系統的風格"><a href="#模組化系統的風格" class="headerlink" title="模組化系統的風格"></a>模組化系統的風格</h1><p>針對如何定義模組之間的相依性，在 JS 世界中有很多不同的標準:</p>
<ul>
<li><code>&lt;script&gt;</code> 標籤(不具備模組化系統)</li>
<li><code>CommonJS</code></li>
<li><code>AMD</code> 以及其衍伸的標準</li>
<li><code>ES6 模組</code></li>
<li>其他</li>
</ul>
<h3 id="lt-script-gt-標籤"><a href="#lt-script-gt-標籤" class="headerlink" title="&lt;script&gt; 標籤"></a><code>&lt;script&gt;</code> 標籤</h3><p>當你不使用任何其他模組化系統，這是你在網頁中處理模組或說切割 JS 檔案的方法。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"module1.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"module2.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"libraryA.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"module3.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>這種方式通常一個模組會匯出介面到全域物件，即 <code>window</code> 物件，模組可以透過全域物件存取相依的介面或叫方法。<br>常見的問題</p>
<ul>
<li>在全域物件中產生衝突</li>
<li>載入的順序非常重要，錯了其他需要相依的函式庫就不能用</li>
<li>開發者必須要自己解決模組和函式庫之間相依性的問題</li>
<li>在大型專案中這一串載入的列表可能非常長，難以維護</li>
</ul>
<h3 id="CommonJS-同步-require"><a href="#CommonJS-同步-require" class="headerlink" title="CommonJS 同步 require"></a>CommonJS 同步 <code>require</code></h3><p>這種方式採用同步風格的 <code>require</code> 方法，類似我們 <code>C#</code> 的 <code>using</code>, <code>Ruby</code> 的 <code>require</code> 或 <code>load</code>，透過這個方法載入相依的函式庫並匯出一系列介面<br>一個模組可以透過在 <code>exports</code> 加上屬性(Property)或 <code>module.exports</code> 的值來設定其介面，這段話有點抽象換成白話一點的解釋: 根據 CommonJS 標準，一個檔案即一個模組。載入模組使用 require 方法，這個方法會讀取檔案並執行，最後回傳檔案內部 exports 的物件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 基礎的用法</span></div><div class="line"><span class="built_in">require</span>(<span class="string">'module'</span>);</div><div class="line"><span class="built_in">require</span>(<span class="string">'../file.js'</span>);</div><div class="line">exports.doStuff = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"><span class="built_in">module</span>.exports = someValue;</div><div class="line"></div><div class="line"><span class="comment">// 簡易的範例</span></div><div class="line"><span class="comment">/***  car.js ***/</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Car</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.run = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"Car run..."</span>);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">this</span>.stop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"Car stop!!"</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> car = <span class="keyword">new</span> Car();</div><div class="line"><span class="built_in">module</span>.exports = car;</div><div class="line"></div><div class="line"><span class="comment">/***  main.js ***/</span></div><div class="line"><span class="keyword">var</span> Car = <span class="built_in">require</span>(<span class="string">"./car"</span>);</div><div class="line">Car.run(); <span class="comment">// Car run...</span></div></pre></td></tr></table></figure>
<p>明白了一點點用法後我們知道 CommonJS 載入模組是同步的。</p>
<p>優點</p>
<ul>
<li>伺服器端模組可以被重複使用</li>
<li>已經有許多 npm 的模組採用這種風格</li>
<li>因為其語法和用起來簡單易懂</li>
</ul>
<p>缺點</p>
<ul>
<li>阻塞式的調用並不適合網路環境，因為網路溝通的 <code>request</code> 是非同步的</li>
<li>沒有支援多模組的平行載入<br>實作</li>
<li><a href="http://nodejs.org/" target="_blank" rel="external">node.js</a></li>
<li><a href="https://github.com/substack/node-browserify" target="_blank" rel="external">browserify</a></li>
<li><a href="https://github.com/medikoo/modules-webmake" target="_blank" rel="external">modules-webmake</a></li>
<li><a href="https://github.com/substack/wreq" target="_blank" rel="external">wreq</a></li>
</ul>
<h3 id="AMD-非同步載入"><a href="#AMD-非同步載入" class="headerlink" title="AMD 非同步載入"></a>AMD 非同步載入</h3><p>因為瀏覽器的需求以及同步 require 的問題，所以引進了一個非同步的版本</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>([<span class="string">'module'</span>, <span class="string">'../file'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">module, file</span>) </span>&#123; <span class="comment">/* code here */</span>&#125;);</div><div class="line"></div><div class="line">define(<span class="string">'mymodule'</span>, [<span class="string">"dep1"</span>, <span class="string">"dep2"</span>], <span class="function"><span class="keyword">function</span>(<span class="params">d1, d2</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> someExportedValue;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>優點</p>
<ul>
<li>符合網路非同步載入的需求</li>
<li>可多模組平行載入</li>
</ul>
<p>缺點</p>
<ul>
<li>需撰寫比較多的程式碼，比較難讀寫(對開發者來說)和維護</li>
<li>看起來像是某種取巧的解法<br>實作</li>
<li><a href="http://requirejs.org/" target="_blank" rel="external">require.js</a></li>
<li><a href="https://github.com/cujojs/curl" target="_blank" rel="external">curl</a></li>
</ul>
<h3 id="ES6-模組"><a href="#ES6-模組" class="headerlink" title="ES6 模組"></a>ES6 模組</h3><p>ECMAScript6 內建的用法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="string">"jquery"</span>;</div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">doStuff</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line"><span class="built_in">module</span> <span class="string">"localModule"</span> &#123;&#125;</div></pre></td></tr></table></figure>
<p>優點</p>
<ul>
<li>靜態解析非常容易</li>
<li>未來將會是標準<br>缺點</li>
<li>瀏覽器全面支援需要花些時間</li>
<li>非常少模組已採用此種方式</li>
</ul>
<h3 id="兼容的解決方案"><a href="#兼容的解決方案" class="headerlink" title="兼容的解決方案"></a>兼容的解決方案</h3><p>讓開發者選擇模組化的標準，讓已存在的程式碼可以運作，使其可以輕鬆的加入其他模組標準。</p>
<h1 id="關於傳輸"><a href="#關於傳輸" class="headerlink" title="關於傳輸"></a>關於傳輸</h1><p>模組通常會在客戶端執行，所以必須從伺服器端傳輸到瀏覽器。</p>
<p>這邊有兩種關於傳輸模組的極端例子:</p>
<ul>
<li>每一個模組一個請求</li>
<li>所有模組整合成一個請求</li>
</ul>
<p>兩者都被廣泛的使用，但也都不是最佳的做法</p>
<p>關於一個模組一個請求</p>
<ul>
<li>優點: 只有需要的模組會被傳輸，不會傳一堆不相關的東西</li>
<li>缺點: 太多 request</li>
<li>缺點: 因為 request 太多導致可能害應用程式初始化或者第一次載入時很慢</li>
</ul>
<p>所有模組整合成一個請求</p>
<ul>
<li>優點: 較少的請求數，程式開始的時候比較快</li>
<li>缺點: 不需要的模組也會被一併傳輸</li>
</ul>
<h1 id="分組傳輸"><a href="#分組傳輸" class="headerlink" title="分組傳輸"></a>分組傳輸</h1><p>一種比較彈性的傳輸，在上面兩種極端的方法中取得平衡的折中作法。<br>在編譯所有模組時: 將系列模組區分成多個較小的區塊(程式碼片段)<br>如此一來就不用在初始化的時候一口氣全部載入，只要根據需求載入即可</p>
<h1 id="為什麼不僅僅只載入-Javascript"><a href="#為什麼不僅僅只載入-Javascript" class="headerlink" title="為什麼不僅僅只載入 Javascript?"></a>為什麼不僅僅只載入 Javascript?</h1><p>我們應該反問為什麼模組化系統只協助開發者處理 Javascript? 還有其他靜態資源檔案需要被處理:</p>
<ul>
<li>stylesheets</li>
<li>images</li>
<li>webfonts</li>
<li>html for templating</li>
</ul>
<p>還有其他</p>
<ul>
<li>coffeescript ➞ javascript</li>
<li>less stylesheet ➞ css</li>
<li>jade ➞ html</li>
<li>i18n ➞ something</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">"./style.css"</span>);</div><div class="line"><span class="built_in">require</span>(<span class="string">"./style.less"</span>);</div><div class="line"><span class="built_in">require</span>(<span class="string">"./template.jade"</span>);</div><div class="line"><span class="built_in">require</span>(<span class="string">"./image.png"</span>);</div></pre></td></tr></table></figure>
<p>因為上面這些動機，所以您找到了 webpack。</p>
<h1 id="Webpack-是什麼"><a href="#Webpack-是什麼" class="headerlink" title="Webpack 是什麼?"></a>Webpack 是什麼?</h1><p><code>webpack</code> 簡單說就是一個模組的封裝工具(module bundler)，由德國的 Tobias Koppers 所開發。webpack 會將模組與其相依性的模組, 函式庫, 其他需要預先編譯的檔案等整合產生此模組的靜態資源檔<br><img src="http://webpack.github.io/assets/what-is-webpack.png" alt=""><br>嫌太饒舌，那我們直接看官方的圖片，就是把我們常用的 <code>.less</code>, <code>.scss</code>, <code>.jade</code> <code>.jsx</code> 等等的檔案編譯成單純的 <code>js</code> + <code>圖片</code>(圖片有時候也可以被編譯成 base64 格式的 dataUrl)。<br>第一次接觸 Webpack 的人可能會忽略這個重點(小弟就是其一)，那就是編譯後的靜態資源檔真的就如圖上所示，只有 <code>js</code> + <code>圖片</code>。<code>css</code>也會被編譯到 js 中，也就不需要在額外匯入。<br>達到真正的模組化。看看下圖一隻編譯完成的檔案</p>
<img src="/2015/07/23/webpack/webpack-1.png" alt="webpack-1.png" title="">
<h1 id="為什麼不用其他-bundler"><a href="#為什麼不用其他-bundler" class="headerlink" title="為什麼不用其他 bundler?"></a>為什麼不用其他 bundler?</h1><p>已存在的 bundler 針對大型專案並不是真的那麼適合，這裡指的是大型的 SPA。為什麼要創造 webpack 最重要的動機就是需要 <code>Code Splitting</code> 拆分程式碼，同時像是 css, 圖片等等靜態資源檔需要無縫整合。這邊的<code>拆分程式碼</code>指的是依照需求，功能來區分模組達到關注點分離。<br>如果您曾經試過其他 bundler 他們並無法達到這個目的。大部份都只是個別組織 JS 檔案和靜態資源檔案。因此 webpack 為了滿足這個動機而誕生。</p>
<h1 id="目標"><a href="#目標" class="headerlink" title="目標"></a>目標</h1><ul>
<li>能夠拆分相依性的關係結構變成程式碼片段，然後依據需求載入</li>
<li>盡可能減少初始化載入的時間</li>
<li>每一個靜態資源檔也應該要能被模組化</li>
<li>有能力整合其他第三方函式庫為模組</li>
<li>bundler 絕大部份能夠依照需求自訂修改</li>
<li>適合大型專案</li>
</ul>
<h1 id="Webpack-有哪些不同"><a href="#Webpack-有哪些不同" class="headerlink" title="Webpack 有哪些不同?"></a>Webpack 有哪些不同?</h1><h3 id="Code-Splitting-拆分程式碼"><a href="#Code-Splitting-拆分程式碼" class="headerlink" title="Code Splitting 拆分程式碼"></a>Code Splitting 拆分程式碼</h3><p>webpack 在其相依性結構(Dependency tree)中有兩種相依的類型: <code>sync</code> 和 <code>async</code>。以非同步相依作為分割點，形成一個新的片段。當 chunk tree 程式碼片段之間的結構被優化之後，就會透過一個檔案整合發佈每一個 chunk 即每個片段程式碼。</p>
<h3 id="loaders-載入器"><a href="#loaders-載入器" class="headerlink" title="loaders 載入器"></a>loaders 載入器</h3><p>載入器當然是翻得不好，一般來說其意義就是負責載入安裝程式的角色，所以這邊我們還是稱其為 loader。雖然 webpack 本身只能夠處理 Javascript，不過因為有 loaders，可以被用來轉換其他資源為 Javascript ，透過這種方式每一個資源檔都可以被轉換成模組形式。<br>換個方式來比喻其實 html 的 <code>&lt;link rel=&quot;stylesheet&quot; /&gt;</code> 就是一個 css 載入器的角色，又或者有用過 browserify 的人所熟悉的 transforms。<br>其功能為轉換解析 ➞ 載入 ➞ 使用。</p>
<h3 id="智慧型解析"><a href="#智慧型解析" class="headerlink" title="智慧型解析"></a>智慧型解析</h3><p>webpack 擁有更聰明的解析工具可以處理幾乎所有的第三方函式庫。甚至允許在相依性設定上使用表達式，例如: <code>require(&quot;./templates/&quot; + name + &quot;.jade&quot;)</code>。<br>這幾乎能處理大部份的模組化標準(CommonJS, AMD)</p>
<h3 id="擴充套件系統"><a href="#擴充套件系統" class="headerlink" title="擴充套件系統"></a>擴充套件系統</h3><p>webpack 擁有豐富的擴充套件。大部份內部的功能都是架構在擴充套件之上。這使得我們能夠自訂客製 webpack 來滿足我們的需求，並且可以發佈成通用套件為 Open Source<br>至此我們對於 webpack 有了一點概念性的了解。</p>
<h1 id="安裝-webpack"><a href="#安裝-webpack" class="headerlink" title="安裝 webpack"></a>安裝 webpack</h1><h3 id="node-js"><a href="#node-js" class="headerlink" title="node.js"></a>node.js</h3><p>使用 webpack 之前我們需要安裝 node.js 以及其內建的套件管理工具 <code>npm</code></p>
<h3 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h3><p>接著就可以透過 <code>npm</code> 直接安裝 webpack</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install webpack -g</div></pre></td></tr></table></figure>
<p>透過 <code>-g</code> 參數 webpack 會被安裝在系統全域環境同時具備 <code>webpack</code> 指令</p>
<h3 id="在專案中使用-webpack"><a href="#在專案中使用-webpack" class="headerlink" title="在專案中使用 webpack"></a>在專案中使用 webpack</h3><p>在專案中使用 webpack 最好也讓專案相依於 webpack，即透過 npm 為專案安裝 webpack。透過這個方式我們可以選擇調整 webpack 的版本，而不必被強迫使用全域的版本。<br>建立專案的步驟首先需要建立一個 <code>package.json</code> 設定檔或者直接使用 <code>npm</code> 指令來產生</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm init</div></pre></td></tr></table></figure>
<p>關於 <code>npm init</code> 會用互動的方式在指令介面問你的問題，如果專案不會公開出去的話其實也不是太重要<br>接著一樣透過 <code>npm</code> 指令安裝 <code>webpack</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install webpack --save-dev</div></pre></td></tr></table></figure>
<h3 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h3><p>一般來說 webpack 同時間會有兩個版本。穩定版以及 Beta 版本。Beta 版會加後綴 <code>-beta</code> 在版號後面。Beta 版本可能會部分實驗性或較不穩定缺少足夠測試的功能，對於需要較嚴謹的東西應該使用穩定版較佳。<br>您可以透過指令來指定安裝的版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install webpack@1.2.x --save-dev</div></pre></td></tr></table></figure>
<p>接著我們就可以來看看該如何使用</p>
<h1 id="指令介面"><a href="#指令介面" class="headerlink" title="指令介面"></a>指令介面</h1><h3 id="安裝全域指令"><a href="#安裝全域指令" class="headerlink" title="安裝全域指令"></a>安裝全域指令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install webpack -g</div></pre></td></tr></table></figure>
<h3 id="單純編譯指令"><a href="#單純編譯指令" class="headerlink" title="單純編譯指令"></a>單純編譯指令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ webpack &lt;entry&gt; &lt;output&gt;</div></pre></td></tr></table></figure>
<h3 id="entry"><a href="#entry" class="headerlink" title="entry"></a>entry</h3><p>傳入一個檔案或者路徑字串。您可以傳入多個程式進入點檔案(每一個檔案將會在啟動期間被載入)，entry 用實作的行為來說明就是那隻用來 require 其他模組的檔案。<br>另外如果你使用 <code>&lt;name&gt;=&lt;filename/request&gt;</code> 的格式您可以替 entry point 建立一個別名。用法如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ webpack bar=./entry.js <span class="string">"[name].js"</span></div><div class="line">&gt;&gt; output a bar.js file.</div></pre></td></tr></table></figure>
<p>同時這個名稱也會被對應到設定檔 <code>entry</code>，太難懂！！沒關係我們換個實際例子來證明這段說明，首先我們建立一個 <code>webpack.config.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// webpack.config.js</span></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">filename</span>: <span class="string">"[name].bundle.js"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>接著執行指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ webpack FooBar=./entry.js</div><div class="line">&gt;&gt; Output a file that is named FooBar.bundle.js</div></pre></td></tr></table></figure>
<h3 id="output"><a href="#output" class="headerlink" title="output"></a>output</h3><p>參數: 表示欲輸出的路徑，其會被映射到設定檔中的 <code>output.path</code> 以及 <code>output.filename</code></p>
<h3 id="設定參數"><a href="#設定參數" class="headerlink" title="設定參數"></a>設定參數</h3><p>webpack 有很多參數能夠直接從指令去設定然後對應到設定檔，即 <code>--debug</code> 對應到 <code>debug: true</code>，<code>--output-library-target</code> 對應到 <code>output.libraryTarget</code></p>
<h3 id="套件"><a href="#套件" class="headerlink" title="套件"></a>套件</h3><p>有些套件被映射到指令的參數選項，即 <code>--define &lt;string&gt;=&lt;string&gt;</code> 會對應到 <code>DefinePlugin</code></p>
<h3 id="Development-縮寫-d"><a href="#Development-縮寫-d" class="headerlink" title="Development 縮寫 -d"></a>Development 縮寫 -d</h3><p>等同於 <code>--debug</code> <code>--devtool source-map</code> <code>--output-pathinfo</code>，產生 source maps 檔案</p>
<h3 id="Production-縮寫-p"><a href="#Production-縮寫-p" class="headerlink" title="Production 縮寫 -p"></a>Production 縮寫 -p</h3><p>等同於 <code>--optimize-minimize</code> <code>--optimize-occurence-order</code>，建置壓縮的程式碼</p>
<h3 id="監視模式-–watch"><a href="#監視模式-–watch" class="headerlink" title="監視模式 –watch"></a>監視模式 –watch</h3><p>會一直監視所有的相依檔案當其改變時自動重新編譯，適用於開發模式持續性的更新編譯</p>
<h3 id="指定設定檔-–config"><a href="#指定設定檔-–config" class="headerlink" title="指定設定檔 –config"></a>指定設定檔 –config</h3><p>設定不同於預設的設定檔。如果您希望採用不同於預設 <code>webpack.config.js</code> 的設定檔可以採用 <code>--config</code> 來指定</p>
<h3 id="顯示參數"><a href="#顯示參數" class="headerlink" title="顯示參數"></a>顯示參數</h3><p><code>--progress</code>: 顯示編譯的進度和訊息<br><code>--json</code>: 產生 JSON 格式的 stdout<br><code>--color</code>: 彩色模式<br><code>--sort-modules-by</code>, <code>--sort-chunks-by</code>, <code>--sort-assets-by</code>: 排序<br><code>--display-chunks</code>: 顯示模組區分的資訊<br><code>--display-error-details</code>: 顯示更多關於錯誤訊息</p>
<h1 id="跟著官方文件實作一遍"><a href="#跟著官方文件實作一遍" class="headerlink" title="跟著官方文件實作一遍"></a>跟著官方文件實作一遍</h1><p>首先是您當然需要安裝 node.js 接著安裝 webpack。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install webpack -g</div></pre></td></tr></table></figure>
<h1 id="開始組織專案"><a href="#開始組織專案" class="headerlink" title="開始組織專案"></a>開始組織專案</h1><p>建立一個空目錄來置放我們的檔案，在該目錄底下建立 <code>entry.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// File: entry.js</span></div><div class="line"><span class="built_in">document</span>.write(<span class="string">"It works."</span>);</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- File: index.html --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"bundle.js"</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span><span class="xml"></span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>執行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ webpack ./entry.js bundle.js</div></pre></td></tr></table></figure>
<p>就會將我們的 <code>entry.js</code> 編譯成 <code>bundle.js</code><br>如果編譯成功，就會輸出類似下面的資訊</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Hash: e97678c23acf8ee01956</div><div class="line">Version: webpack 1.9.10</div><div class="line">Time: 62ms</div><div class="line">    Asset     Size  Chunks             Chunk Names</div><div class="line">bundle.js  1.44 kB       0  [emitted]  main</div><div class="line">   [0] ./entry.js 29 bytes &#123;0&#125; [built]</div></pre></td></tr></table></figure>
<p>接著開啟 <code>index.html</code> 如下圖</p>
<img src="/2015/07/23/webpack/webpack-2.png" alt="webpack-2.png" title="">
<h1 id="第二個資源檔案"><a href="#第二個資源檔案" class="headerlink" title="第二個資源檔案"></a>第二個資源檔案</h1><p>接著我們模擬實際專案的狀況，匯入另外一個檔案 <code>content.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// content.js</span></div><div class="line"><span class="built_in">module</span>.exports = <span class="string">"It works from content.js"</span>;</div></pre></td></tr></table></figure>
<p>然後編輯 <code>entry.js</code> 加入 <code>require</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// File: entry.js</span></div><div class="line"><span class="built_in">document</span>.write(<span class="built_in">require</span>(<span class="string">"./content.js"</span>));</div></pre></td></tr></table></figure>
<p>更新瀏覽器得到如下圖</p>
<img src="/2015/07/23/webpack/webpack-3.png" alt="webpack-3.png" title="">
<p>Webpack 會分析進入點檔案並取得相依的其他檔案。這些檔案(被稱為模組)也會被加入到 <code>bundle.js</code>。Webpack 會給每一個模組唯一的 ID 然後透過 ID 存取這些模組，這些模組都會被整合到 bundle.js 裡面。只有進入點的模組會在程式啟動時被執行。這個小範例示範了 <code>require</code> 以及當相依模組被 <code>require</code> 載入後執行的用法。</p>
<h1 id="第一個-loader"><a href="#第一個-loader" class="headerlink" title="第一個 loader"></a>第一個 loader</h1><p>現在我們遇到一個問題，我們想要加入 css 到該應用程式中，Webpack 預設只能夠處理 JS 檔案，所以我們需要 <code>css-loader</code> 來處理 css 檔案。接著透過 <code>style-loader</code> 來把樣式套用到 DOM 上。</p>
<p>建立一個空的 <code>node_modules</code> 目錄(或者您要使用 npm init)，事實上直接使用 <code>npm install</code> 也是會自動建立 <code>node_module</code> 目錄。<br>執行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install css-loader style-loader</div></pre></td></tr></table></figure>
<p>加入 <code>style.css</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">body</span> &#123;</div><div class="line">  <span class="attribute">background</span>: yellow;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>再次編輯 <code>entry.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">"!style!css!./style.css"</span>);</div><div class="line"><span class="built_in">document</span>.write(<span class="built_in">require</span>(<span class="string">"./content.js"</span>));</div></pre></td></tr></table></figure>
<p>重新編譯並重整瀏覽器得到</p>
<img src="/2015/07/23/webpack/webpack-4.png" alt="webpack-4.png" title="">
<p>透過在匯入模組(在這邊就只是一隻檔案)前加上 <code>!</code> 和 loader 的前綴字，該模組將會逐步透過每一個 loader 處理，一個 pipeline 的概念，一個處理完交棒給下一個處理，這些 loader 會將檔案中的內容根據特定需求轉換。在經過這些轉換的過程之後最終的結果就是一個 javascript 模組。</p>
<h1 id="綁定-loaders"><a href="#綁定-loaders" class="headerlink" title="綁定 loaders"></a>綁定 loaders</h1><p>實務上，我們並不希望一直重複撰寫這種長長的 pipe 方式，即 <code>require(&quot;!style!css!./style.css&quot;);</code><br>我們可以根據副檔名綁定或說設定其 loaders，如此一來我們就只要寫 <code>require(&quot;./style.css&quot;)</code></p>
<p>改寫 <code>entry.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// entry.js</span></div><div class="line"><span class="built_in">require</span>(<span class="string">"./style.css"</span>);</div><div class="line"><span class="built_in">document</span>.write(<span class="built_in">require</span>(<span class="string">"./content.js"</span>));</div></pre></td></tr></table></figure>
<p>透過指令的方式繫結</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ webpack ./entry.js bundle.js --module-bind <span class="string">'css=style!css'</span></div><div class="line"></div><div class="line"><span class="comment"># 有一點要注意的是因為 ! 在 bash 裡面有特殊意義所以當您想用 " 替代 ' 請記得跳脫</span></div><div class="line">$ webpack ./entry.js bundle.js --module-bind <span class="string">"css=style\!css"</span></div></pre></td></tr></table></figure>
<p>您應該會看到跟上面黃色底一樣的結果</p>
<h1 id="設定檔"><a href="#設定檔" class="headerlink" title="設定檔"></a>設定檔</h1><p>除非你是下指令狂，不然您應該不會希望每次指令都這麼長，這時我們可以把這些參數移到一個設定檔裡 <code>webpack.config.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">entry</span>: <span class="string">"./entry.js"</span>,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">path</span>: __dirname, <span class="comment">// 此設定檔案所在的目錄</span></div><div class="line">    filename: <span class="string">"bundle.js"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">loader</span>: <span class="string">"style!css"</span> &#125;</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>一旦您有了設定檔，現在你只需要執行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ webpack</div></pre></td></tr></table></figure>
<p>webpack 指令會試圖去載入當前目錄下的 <code>webpack.config.js</code></p>
<h1 id="整潔易看的輸出"><a href="#整潔易看的輸出" class="headerlink" title="整潔易看的輸出"></a>整潔易看的輸出</h1><p>隨著我們的專案增長，編譯的時間可能會稍微長一點點。所以我們希望在編譯的時候有進度表以及我們希望輸出的資訊可以有顏色以便我們好觀察<br>這個時候我們可以透過下面參數達成</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ webpack --progress --colors</div></pre></td></tr></table></figure>
<h1 id="監視模式-watch"><a href="#監視模式-watch" class="headerlink" title="監視模式 watch"></a>監視模式 watch</h1><p>又或許在開發時期我們不希望一直手動輸入指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ webpack --progress --colors --watch</div></pre></td></tr></table></figure>
<p>Webpack 可以快取沒有改變的模組。</p>
<p>當使用監視模式，webpack 會觀察專案底下所有在編譯時會用到的檔案，如果這些檔案發生改變，馬上會重新編譯<br>當快取被啟動的時候 webpack 會將所有模組存在記憶體中，如果模組沒有改變就會繼續沿用。</p>
<h1 id="開發時期伺服器"><a href="#開發時期伺服器" class="headerlink" title="開發時期伺服器"></a>開發時期伺服器</h1><p>更好用的開發時期的伺服器 <code>webpack-dev-server</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 安裝</span></div><div class="line">$ npm install webpack-dev-server -g</div><div class="line"><span class="comment"># 啟動</span></div><div class="line">$ webpack-dev-server --progress --colors</div></pre></td></tr></table></figure>
<p>提供一個 <code>localhost:8080</code> 的 express server ，讓我們在開發時期可以更快速的觀察結果，當然會自動編譯，同時自動更新頁面(socket.io)<br>這個工具使用 webpack 的監視模式所以編譯的結果</p>
<p>這個開發伺服器使用了 webpack 的監視模式。同時他也會阻止 webpack 持續把編譯結果存到硬碟上，取而代之的這個結果會被保留在記憶體。<br>不要誤會！這邊說的是如果你單純使用 webpack 監視模式，上例中的 bundle.js 檔案是會被產生的，但如果是 webpack-dev-server 則不會產生 bundle.js 那隻檔案。</p>
<h1 id="webpack-how-跟著-Pete-hunt-的文件再跑一輪"><a href="#webpack-how-跟著-Pete-hunt-的文件再跑一輪" class="headerlink" title="webpack-how 跟著 Pete hunt 的文件再跑一輪"></a>webpack-how 跟著 Pete hunt 的文件再跑一輪</h1><p>這個段落我們會在翻譯以及實作 webpack-howto 來加深我們對 webpack 的理解，老實說因為官方的文件並不是非常完整。</p>
<h3 id="1-為什麼使用-webpack-Pete-hunt-版"><a href="#1-為什麼使用-webpack-Pete-hunt-版" class="headerlink" title="1. 為什麼使用 webpack (Pete hunt 版)"></a>1. 為什麼使用 webpack (Pete hunt 版)</h3><ul>
<li>它很像 browserify，但是他可以分割程式為多個檔案。例如您在一個單一頁面應用程式(SPA)中有數個頁面，那麼使用者只需要下載正在閱讀的那一頁，如果他切換到另個頁面，也不會重新下載共用部分的程式碼</li>
<li>大多數的情況下可以取代 grunt 或 gulp 因為他也可以封裝 css, 預先編譯的 css 語言, 預先編譯的 js 語言, 圖片以及其他東西</li>
</ul>
<p>同時它支援 AMD 和 CommonJS  以及其他模組標準。如果您不知道該使用什麼，就用 CommonJS</p>
<h3 id="2-對於會用-Browerify-的開發者"><a href="#2-對於會用-Browerify-的開發者" class="headerlink" title="2. 對於會用 Browerify 的開發者"></a>2. 對於會用 Browerify 的開發者</h3><p>下面兩個指令是等價的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ browserify main.js &gt; bundle.js</div><div class="line"></div><div class="line">$ webpack main.js bundle.js</div></pre></td></tr></table></figure>
<p>然而 webpack 比起 Browserify 更加強大，也因為支援許多功能，所以一般來說我們會將設定存放在 <code>webpack.config.js</code> 這隻設定檔。<br>讓我們再來多練習一次，建立一個 <code>webpack_sandbox</code> 目錄，裡面自己放一些簡單的 <code>main.js</code> 主要的進入點程式，<code>index.html</code> 測試載入 bundle.js 是否正常運作，以及最重要的 <code>webpack.config.js</code> 如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">entry</span>: <span class="string">'./main.js'</span>,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">filename</span>: <span class="string">'bundle.js'</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>這個 <code>webpack.config.js</code> 就只是 Javascript ，所以就像你平常寫 js 一樣修改它即可。</p>
<h3 id="3-如何執行-webpack"><a href="#3-如何執行-webpack" class="headerlink" title="3. 如何執行 webpack"></a>3. 如何執行 webpack</h3><p>一般來說我們常用的編譯指令如下，記住先切換到 <code>webpack.config.js</code> 所在的目錄底下然後執行</p>
<ul>
<li><code>webpack</code> 建置編譯開發版的檔案，只會運行一次</li>
<li><code>webpack -p</code> 執行一次建置的任務，產生正式版(具有壓縮)</li>
<li><code>webpack --watch</code> 持續性編譯，即開發時期，每次一變更檔案就重新編譯(快速)</li>
<li><code>webpack -d</code> 包含產出 source maps，即 .js.map 檔案</li>
</ul>
<h3 id="4-預先編譯的-JS-語言"><a href="#4-預先編譯的-JS-語言" class="headerlink" title="4. 預先編譯的 JS 語言"></a>4. 預先編譯的 JS 語言</h3><p>在 webpack 中有個跟 browserify 的 transforms 以及 RequireJS plugin 功能相等的東西，就是 loader。下面示範如何讓 webpack 載入 CoffeeScript 和 Facebook 的 JSX + ES6 支援(您必須要安裝 <code>babel-loader coffee-loader</code>)，因為 babel 內建搭載支援 JSX 所以您不需要再增加額外的 jsx-loader。</p>
<p>為了要實際測試，我們需要再目錄中建立一個 coffee, React 元件(JSX + ES6 支援)<br>首先先測試 coffee 所以我們新增一隻測試的 coffee</p>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># File: audi.coffee</span></div><div class="line">value = <span class="string">"It's from audi.coffee"</span> <span class="keyword">if</span> <span class="literal">true</span> <span class="comment"># it's coffeescript syntax.</span></div><div class="line"><span class="built_in">module</span>.exports = value;</div></pre></td></tr></table></figure>
<p>安裝 coffee-loader</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm init</div><div class="line">$ npm install coffee-loader --save-dev</div></pre></td></tr></table></figure>
<p>調整 webpack.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// File: webpack.config.js</span></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">entry</span>: <span class="string">'./main.js'</span>,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">filename</span>: <span class="string">'bundle.js'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.coffee$/</span>, <span class="attr">loader</span>: <span class="string">'coffee-loader'</span> &#125;,</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>測試，在 main.js 中使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// File: main.js</span></div><div class="line"><span class="built_in">document</span>.write(<span class="string">"Hey from main.js"</span>);</div><div class="line"><span class="built_in">document</span>.write(<span class="string">"&lt;br/&gt;"</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> audi = <span class="built_in">require</span>(<span class="string">"./audi.coffee"</span>);</div><div class="line"><span class="built_in">document</span>.write(audi);</div><div class="line"><span class="built_in">document</span>.write(<span class="string">"&lt;br/&gt;"</span>);</div></pre></td></tr></table></figure>
<p>接著我們來測試 jsx 與 React，記得先安裝 babel-loader</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install babel-loader --save-dev</div></pre></td></tr></table></figure>
<p>調整 webpack.config.js 為</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">entry</span>: <span class="string">'./main.js'</span>,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">filename</span>: <span class="string">'bundle.js'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.coffee$/</span>, <span class="attr">loader</span>: <span class="string">'coffee-loader'</span> &#125;,</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">loader</span>: <span class="string">'babel-loader'</span>&#125;,</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>新增一隻 React 元件檔案 <code>toyota.js</code></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// File: toyota.js</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Totota</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">      It's from toyota.js</div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>最後 main.js(記得在 index.html 補上 React 的 JS)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// File: main.js</span></div><div class="line"><span class="built_in">document</span>.write(<span class="string">"Hey from main.js"</span>);</div><div class="line"><span class="built_in">document</span>.write(<span class="string">"&lt;br/&gt;"</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> audi = <span class="built_in">require</span>(<span class="string">"./audi.coffee"</span>);</div><div class="line"><span class="built_in">document</span>.write(audi);</div><div class="line"><span class="built_in">document</span>.write(<span class="string">"&lt;br/&gt;"</span>);</div><div class="line"></div><div class="line"><span class="built_in">document</span>.write(<span class="string">"&lt;div id='toyota'&gt;&lt;/div&gt;"</span>);</div><div class="line"><span class="keyword">var</span> Toyota = <span class="built_in">require</span>(<span class="string">"./toyota.js"</span>);</div><div class="line"><span class="comment">// 另外一種模組標準的寫法</span></div><div class="line"><span class="comment">// import Toyota from "./toyota.js";</span></div><div class="line">React.render(<span class="xml"><span class="tag">&lt;<span class="name">Toyota</span> /&gt;</span>, document.getElementById("toyota"));</span></div></pre></td></tr></table></figure>
<p>每次在 require 的時候都要輸入附檔名也是挺麻煩的，所以 webpack 也提供您 require 不加副檔名的機制，為了開啟這個功能，我們必須要加入 <code>resolve.extensions</code><br>參數告訴 webpack 該處理哪些副檔名。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">entry</span>: <span class="string">'./main.js'</span>,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">filename</span>: <span class="string">'bundle.js'</span>       </div><div class="line">  &#125;,</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.coffee$/</span>, <span class="attr">loader</span>: <span class="string">'coffee-loader'</span> &#125;,</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">loader</span>: <span class="string">'babel-loader'</span> &#125;</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">resolve</span>: &#123;</div><div class="line">    <span class="comment">// 現在您可以把那些 require 中的副檔名去掉了</span></div><div class="line">    extensions: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.json'</span>, <span class="string">'.coffee'</span>]</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>如果您是採用 <code>webpack-dev-server</code> 在修改 config 之後請記得重啟</p>
<p>如果檔名一樣會怎樣，在正常的專案底下不同類型的資源檔通常會用不同的目錄區隔，不過在這個簡單的範例中的確是有可能會重複的。<br>webpack 其實會照上面 resolve 設定的陣列依序搜尋，找到了就不往下了。也就是如果有同名的 js 和 coffee 會處理 <code>[檔名].js</code> 而不管 coffee。</p>
<h3 id="5-樣式與圖片"><a href="#5-樣式與圖片" class="headerlink" title="5. 樣式與圖片"></a>5. 樣式與圖片</h3><p>接著我們要來實作在模組中透過 <code>require()</code> 使用那些靜態資源檔。<br>先示範在程式中我們會改成這樣參考資源檔，像 css, 圖片等等</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">"./bootstrap.css"</span>);</div><div class="line"><span class="built_in">require</span>(<span class="string">"./app.scss"</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>);</div><div class="line">img.src = <span class="built_in">require</span>(<span class="string">"./images/pretty.jpg"</span>);</div><div class="line"><span class="built_in">document</span>.body.appendChild(img);</div></pre></td></tr></table></figure>
<p>當我們 require css 或者 scss, less 等等的時候，webpack 會把 css 轉換一行的字串並封裝在 JS 中，然後當我們執行 <code>require()</code> 會幫我們插入 <code>&lt;stype&gt;</code> 標籤到該頁面<br>而當我們 require 圖片的時候，webpack 則會把圖片轉換成 dataURI 或帶入連結。</p>
<p>當然這些都不是預設有的功能，你必須透過 loaders 告訴 webpack 該怎麼做，我們需要的 loaders，<code>css-loader</code> 和 <code>style-loader</code> 處理樣式，<code>sass-loader</code> 當然是處理 scss，<code>url-loader</code> 則負責處理圖片(檔案)類似。您也可以使用 <code>file-laoder</code> 不過 <code>url-loader</code> 可以設定限制檔案大小回傳 dataURI 或路徑。</p>
<p>這邊我們額外提一下上面說的流程中 css-loader 才是真正在解析 css 檔案，並且他會解析 css 中的 <code>url(...)</code> 轉換成 <code>require(...)</code> ，如此一來所有的資源都會依照 webpack 的處理方式載入，而 style-loader 收到這個輸出之後會把這些轉換完的結果注入 DOM 。</p>
<p>安裝 loaders</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install css-loader style-loader sass-loader url-loader --save-dev</div></pre></td></tr></table></figure>
<p>設定 webpack.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// webpack.config.js</span></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">entry</span>: <span class="string">'./main.js'</span>,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">'./build'</span>,</div><div class="line">    <span class="attr">publicPath</span>: <span class="string">'http://andyyou.github.io/'</span>, <span class="comment">// 圖片等需要路徑引用的資源檔加上網址</span></div><div class="line">    <span class="comment">// 注意: 尾巴的 / 要記得加否則會產出類似 http://andyyou.github.io600e2b78b83128cc2be868b3971d0999.jpg 的路徑</span></div><div class="line">    filename: <span class="string">'bundle.js'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.coffee$/</span>, <span class="attr">loader</span>: <span class="string">'coffee-loader'</span> &#125;,</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">loader</span>: <span class="string">'babel-loader'</span>&#125;,</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">loader</span>: <span class="string">'style!css'</span> &#125;,</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>, <span class="attr">loader</span>: <span class="string">'style!css!sass'</span>&#125;, <span class="comment">// =&gt; 透過 css-laoder 不只處理編譯好的 css, imports 同時包含 url(...)</span></div><div class="line">      <span class="comment">// &#123; test: /\.css$/, loader: 'raw!sass' &#125;, // =&gt; 回傳編譯好的 css 程式碼單純只解析 imports 但不處理 url(...)</span></div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.(png|jpg)$/</span>, <span class="attr">loader</span>: <span class="string">'url-loader?limit=8192'</span> &#125; <span class="comment">// 當檔案小於 8K 的時候會產生 base64 格式的 dataURI 超過的話則直接帶連結</span></div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">resolve</span>: &#123;</div><div class="line">    <span class="attr">extensions</span>: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.json'</span>, <span class="string">'.coffee'</span>, <span class="string">'.scss'</span>, <span class="string">'.css'</span>]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="6-功能標籤"><a href="#6-功能標籤" class="headerlink" title="6. 功能標籤"></a>6. 功能標籤</h3><p>我們想要某些程式碼只在特定環境下才執行，例如顯示偵錯訊息，又或者只在內部伺服器才開啟這個功能。<br>因為我們是使用 webpack 來封裝編譯整個專案，所以很合理的可以加上一些 flag 讓 webpack 去替我們處理。<br>我們可以直接在剛剛 main.js 中示範</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// main.js</span></div><div class="line"><span class="keyword">if</span> (__DEV__) &#123;</div><div class="line">  <span class="built_in">console</span>.warn(<span class="string">"It's dev environments"</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (__PRERELEASE__) &#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">"requre and show secret feature."</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>不過我們不是直接就可以使用魔術般的全域變數。我們還是需要告訴 webpack 才行<br>下面這邊示範在 webpack 官方提到的 plugins 用法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">"webpack"</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> definePlugin = <span class="keyword">new</span> webpack.DefinePlugin(&#123;</div><div class="line">  <span class="attr">__DEV__</span>: <span class="built_in">JSON</span>.stringify(<span class="built_in">JSON</span>.parse(process.env.BUILD_DEV || <span class="string">'true'</span>)),</div><div class="line">  <span class="attr">__PRERELEASE__</span>: <span class="built_in">JSON</span>.stringify(<span class="built_in">JSON</span>.parse(process.env.BUILD_PRERELEASE || <span class="string">'false'</span>))</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">entry</span>: <span class="string">'./main.js'</span>,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">'./build'</span>, <span class="comment">// 編譯後的檔案放在這個目錄</span></div><div class="line">    <span class="comment">// publicPath: 'http://andyyou.github.io/', // 圖片等需要路徑引用的資源檔加上網址</span></div><div class="line">    <span class="comment">// 注意: 尾巴的 / 要記得加否則會產出類似 http://andyyou.github.io600e2b78b83128cc2be868b3971d0999.jpg 的路徑</span></div><div class="line">    filename: <span class="string">'bundle.js'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.coffee$/</span>, <span class="attr">loader</span>: <span class="string">'coffee-loader'</span> &#125;,</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">loader</span>: <span class="string">'babel-loader'</span>&#125;,</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">loader</span>: <span class="string">'style!css'</span> &#125;,</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>, <span class="attr">loader</span>: <span class="string">'style!css!sass'</span>&#125;, <span class="comment">// =&gt; 透過 css-laoder 不只處理編譯好的 css, imports 同時包含 url(...)</span></div><div class="line">      <span class="comment">// &#123; test: /\.css$/, loader: 'raw!sass' &#125;, // =&gt; 回傳編譯好的 css 程式碼單純只解析 imports 但不處理 url(...)</span></div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.(png|jpg)$/</span>, <span class="attr">loader</span>: <span class="string">'url-loader?limit=8192'</span> &#125; <span class="comment">// 當檔案小於 8K 的時候會產生 base64 格式的 dataURI 超過的話則直接帶連結</span></div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">resolve</span>: &#123;</div><div class="line">    <span class="attr">extensions</span>: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.json'</span>, <span class="string">'.coffee'</span>, <span class="string">'.scss'</span>, <span class="string">'.css'</span>]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">plugins</span>: [definePlugin],</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>接著我們就能夠用 <code>BUILD_DEV=0 BUILD_PRERELEASE=1 webpack</code>, 或者 <code>BUILD_DEV=0 BUILD_PRERELEASE=1 webpack-dev-server --progress --colors</code><br>來帶入參數，注意到 <code>webpack -p</code> 壓縮程式碼的時候會把不會執行的程式碼區塊給移除，所以我們不需要擔心洩露機密的程式碼到最後產出的檔案中。</p>
<h3 id="7-多個檔案-進入點程式-entrypoints"><a href="#7-多個檔案-進入點程式-entrypoints" class="headerlink" title="7. 多個檔案(進入點程式, entrypoints)"></a>7. 多個檔案(進入點程式, entrypoints)</h3><p>截至目前為止我們都只有一個 entry 即 <code>main.js</code> ，假設我們需要替<code>個人資料頁</code>和<code>訂閱頁面</code>各自加入自己擁有的 JS，因為我們不希望讓使用者在查閱個人資料時載入訂閱頁面需要的程式碼。所以我們需要打包成兩隻檔案，也就是這兩個頁面各自有自己的 entrypoint<br>此時我們只需要修改設定檔</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// webpack.config.js</span></div><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">"webpack"</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> definePlugin = <span class="keyword">new</span> webpack.DefinePlugin(&#123;</div><div class="line">  <span class="attr">__DEV__</span>: <span class="built_in">JSON</span>.stringify(<span class="built_in">JSON</span>.parse(process.env.BUILD_DEV || <span class="string">'true'</span>)),</div><div class="line">  <span class="attr">__PRERELEASE__</span>: <span class="built_in">JSON</span>.stringify(<span class="built_in">JSON</span>.parse(process.env.BUILD_PRERELEASE || <span class="string">'false'</span>))</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">entry</span>: &#123;</div><div class="line">    <span class="attr">Main</span>: <span class="string">'./main.js'</span>,</div><div class="line">    <span class="attr">Profile</span>: <span class="string">'./profile.js'</span>,</div><div class="line">    <span class="attr">Feed</span>: <span class="string">'./feed.js'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">'./build'</span>,</div><div class="line">    <span class="comment">// publicPath: 'http://andyyou.github.io/', // 圖片等需要路徑引用的資源檔加上網址或路徑</span></div><div class="line">    publicPath: <span class="string">'/build/'</span>, <span class="comment">// 因為有設定目錄，所以記得要補路徑，否則 require() 會取錯路徑。</span></div><div class="line">    <span class="comment">// 注意: 尾巴的 / 要記得加否則會產出類似 http://andyyou.github.io600e2b78b83128cc2be868b3971d0999.jpg 的路徑</span></div><div class="line">    filename: <span class="string">'[name].bundle.js'</span> <span class="comment">// [name] 會使用 key 也就是上面大寫的 Main, Feed, Profile 等</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.coffee$/</span>, <span class="attr">loader</span>: <span class="string">'coffee-loader'</span> &#125;,</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">loader</span>: <span class="string">'babel-loader'</span>&#125;,</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">loader</span>: <span class="string">'style!css'</span> &#125;,</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>, <span class="attr">loader</span>: <span class="string">'style!css!sass'</span>&#125;, <span class="comment">// =&gt; 透過 css-laoder 不只處理編譯好的 css, imports 同時包含 url(...)</span></div><div class="line">      <span class="comment">// &#123; test: /\.css$/, loader: 'raw!sass' &#125;, // =&gt; 回傳編譯好的 css 程式碼單純只解析 imports 但不處理 url(...)</span></div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.(png|jpg)$/</span>, <span class="attr">loader</span>: <span class="string">'url?limit=8192'</span> &#125; <span class="comment">// 當檔案小於 8K 的時候會產生 base64 格式的 dataURI 超過的話則直接帶連結</span></div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">resolve</span>: &#123;</div><div class="line">    <span class="attr">extensions</span>: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.json'</span>, <span class="string">'.coffee'</span>, <span class="string">'.scss'</span>, <span class="string">'.css'</span>]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">plugins</span>: [definePlugin],</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>設好之後，接著我們就可以透過 <code>&lt;script src=&quot;build/Profile.bundle.js&quot;&gt;&lt;/script&gt;</code> 針對個別頁面載入</p>
<h3 id="8-優化通用的程式碼"><a href="#8-優化通用的程式碼" class="headerlink" title="8. 優化通用的程式碼"></a>8. 優化通用的程式碼</h3><p>假設上面的 Feed 和 Profile 有很多通用的部分(比如說 React 元件和通用的樣式)<br>webpack 會分析他們哪些是共用的部分，如此一來共享的部分就會直接被快取，不用再重新載入一次。<br>透過使用 <code>new webpack.optimize.CommonsChunkPlugin</code> 如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// File: webpack.config.js</span></div><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">"webpack"</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> definePlugin = <span class="keyword">new</span> webpack.DefinePlugin(&#123;</div><div class="line">  <span class="attr">__DEV__</span>: <span class="built_in">JSON</span>.stringify(<span class="built_in">JSON</span>.parse(process.env.BUILD_DEV || <span class="string">'true'</span>)),</div><div class="line">  <span class="attr">__PRERELEASE__</span>: <span class="built_in">JSON</span>.stringify(<span class="built_in">JSON</span>.parse(process.env.BUILD_PRERELEASE || <span class="string">'false'</span>))</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">var</span> commonsPlugin = <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(<span class="string">'common.js'</span>);</div><div class="line"><span class="comment">// =&gt; 注意到這邊的參數會轉換成檔名輸出所以請記得加副檔名</span></div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">entry</span>: &#123;</div><div class="line">    <span class="attr">Main</span>: <span class="string">'./main.js'</span>,</div><div class="line">    <span class="attr">Profile</span>: <span class="string">'./profile.js'</span>,</div><div class="line">    <span class="attr">Feed</span>: <span class="string">'./feed.js'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">'./build'</span>,</div><div class="line">    <span class="comment">// publicPath: 'http://andyyou.github.io/', // 圖片等需要路徑引用的資源檔加上網址或路徑</span></div><div class="line">    publicPath: <span class="string">'/build/'</span>, <span class="comment">// 因為有設定目錄，所以記得要補路徑，否則 require() 會取錯路徑</span></div><div class="line">    <span class="comment">// 注意: 尾巴的 / 要記得加否則會產出類似 http://andyyou.github.io600e2b78b83128cc2be868b3971d0999.jpg 的路徑</span></div><div class="line">    filename: <span class="string">'[name].bundle.js'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.coffee$/</span>, <span class="attr">loader</span>: <span class="string">'coffee-loader'</span> &#125;,</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">loader</span>: <span class="string">'babel-loader'</span>&#125;,</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">loader</span>: <span class="string">'style!css'</span> &#125;,</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>, <span class="attr">loader</span>: <span class="string">'style!css!sass'</span>&#125;, <span class="comment">// =&gt; 透過 css-laoder 不只處理編譯好的 css, imports 同時包含 url(...)</span></div><div class="line">      <span class="comment">// &#123; test: /\.css$/, loader: 'raw!sass' &#125;, // =&gt; 回傳編譯好的 css 程式碼單純只解析 imports 但不處理 url(...)</span></div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.(png|jpg)$/</span>, <span class="attr">loader</span>: <span class="string">'url?limit=8192'</span> &#125; <span class="comment">// 當檔案小於 8K 的時候會產生 base64 格式的 dataURI 超過的話則直接帶連結</span></div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">resolve</span>: &#123;</div><div class="line">    <span class="attr">extensions</span>: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.json'</span>, <span class="string">'.coffee'</span>, <span class="string">'.scss'</span>, <span class="string">'.css'</span>]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">plugins</span>: [definePlugin, commonsPlugin],</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>事實上 webpack 檢查的就只是重複 require 的部分，當多個 entrypoint 都有使用到某個模組，就可以透過上面的方式提出。<br>如此一來在 html 則要加入 <code>&lt;script src=&quot;build/common.js&quot;&gt;</code> 否則會爆。這麼做就可以享受瀏覽器為我們快取檔案的優點。</p>
<h3 id="9-非同步載入"><a href="#9-非同步載入" class="headerlink" title="9. 非同步載入"></a>9. 非同步載入</h3><p>CommonJS 標準屬於同步的處理方式但是 webpack 提供了一種方式來達到非同步處理相依性載入<br>這通常對於 client 端有使用路由的狀況非常實用，假設您透過路由來取得的每個頁面，但是您不希望直接就下載所有程式碼直到程式運行真的需要該部分程式碼的時候才下載。<br>這個時候我們就可以使用 <code>require.ensure()</code> 的方式來載入模組</p>
<p>下面是範例的程式碼，ensure 的第一個參數是相依的模組，類似於 RequireJS 的 <code>define()</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.location.pathname === <span class="string">'/feed'</span>) &#123;</div><div class="line">  showLoadingState();</div><div class="line">  <span class="built_in">require</span>.ensure([], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    hideLoadingState();</div><div class="line">    <span class="built_in">require</span>(<span class="string">'./feed'</span>).show(); <span class="comment">// 當這個函式被呼叫，模組保證被同步載入可以使用</span></div><div class="line">  &#125;);</div><div class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.location.pathname === <span class="string">'/profile'</span>) &#123;</div><div class="line">  showLoadingState();</div><div class="line">  <span class="built_in">require</span>.ensure([], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    hideLoadingState();</div><div class="line">    <span class="built_in">require</span>(<span class="string">'./profile'</span>).show();</div><div class="line">  &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>webpack 會幫您處理剩下的事情，產生因為非同步設定而需要額外 chunk 檔案<br>有點難懂，沒關係我們現在先新增另外一個模組 <code>benz.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = <span class="string">"It's from module Benz"</span>;</div></pre></td></tr></table></figure>
<p>然後在我們的 main.js 放入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.location.pathname === <span class="string">'/profile.html'</span>) &#123;</div><div class="line">  <span class="built_in">require</span>.ensure([], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="built_in">require</span>(<span class="string">"./benz"</span>));</div><div class="line">    <span class="built_in">document</span>.write(<span class="built_in">require</span>(<span class="string">"./benz"</span>));</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>編譯之後會看到如下圖，官方文件提到的 chunk 實際上就是 webpack 處理過後依照需求區分的<code>程式碼片段</code></p>
<img src="/2015/07/23/webpack/webpack-5.png" alt="webpack-5.png" title="">
<h1 id="webpack-dev-server"><a href="#webpack-dev-server" class="headerlink" title="webpack-dev-server"></a>webpack-dev-server</h1><p>webpack-dev-server 是一個小型的 node.js <a href="http://expressjs.com/" target="_blank" rel="external">Express</a> 伺服器，其使用 <code>webpack-dev-middleware</code> 來取得 webpack 封裝的結果。<br>在運行時也有使用 socket.io 使其可以即時發送編譯後的資訊到客戶端<br>同時這個開發伺服器也可以根據不同需求使用不同的模式，假設我們採用下面這組設定檔</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">entry</span>: &#123;</div><div class="line">    <span class="attr">app</span>: [<span class="string">"./app/main.js"</span>]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">'./build'</span>,</div><div class="line">    <span class="attr">publicPath</span>: <span class="string">"/assets/"</span>,</div><div class="line">    <span class="attr">filename</span>: <span class="string">"bundle.js"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面這組設定的意思您現在應該很請楚了，即我們有一隻進入點的程式(檔案)在 <code>app/main.js</code> ，webpack 將會打包 entrypoint 成 bundle.js 檔案到 bundle 目錄。<br>同時我們也回顧一下光 entry 的設定就多種組合</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="comment">// 1</span></div><div class="line">  entry: &#123;</div><div class="line">    <span class="attr">app</span>: [<span class="string">"./app/main.js"</span>]</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// 2</span></div><div class="line">  entry: <span class="string">"./app/main.js"</span>,</div><div class="line">  <span class="comment">// 3</span></div><div class="line">  entry: &#123;</div><div class="line">    <span class="attr">app</span>: <span class="string">"./app/main.js"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// 4</span></div><div class="line">  entry: [<span class="string">"./a.js"</span>, <span class="string">"./b.js"</span>],</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果使用陣列的方式設定，所有的模組會在啟動時被載入，而最後一個檔案會被匯出。另外注意到如果適用第四種方式然後在 output 也使用了 <code>[name]</code> 那這個 name 預設是 <code>main</code><br>而想要多個 entrypoint 檔案的話則透過物件的格式，webpack 就會產生多個 entrypoint bundle。</p>
<h3 id="預設一般模式-Inline-mode"><a href="#預設一般模式-Inline-mode" class="headerlink" title="預設一般模式(Inline mode)"></a>預設一般模式(Inline mode)</h3><p>剛剛我們提到 webpack-dev-server 有不同的模式，現在我們就來瞭解一下其中一個 inline 模式。<br>一般情況下 webpack-dev-server 會處理當前目錄的檔案(就是你下指令時的那個目錄)，除非您有指定 <code>content-base</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ webpack-dev-server --content-base build/</div></pre></td></tr></table></figure>
<p>使用了這個設定，webpack-dev-server 就會處理你指定的那個目錄，預設 webpack-dev-server 就會自動監視該目錄下的檔案，當發生改變就會自動重新編譯。<br>不過這些編譯只會放到記憶體並和 <code>publicPath</code> 的路徑關聯，而不會產生實體檔案。<br>當 bundle 已經存在在相同路徑時也就是已經產生檔案，記憶體中的會優先使用。<br>舉上面一開始的設定檔為例，這個 bundle 封裝結果可以透過 <code>localhost:8080/assets/bundle.js</code> 存取</p>
<p>為了測試這個結果我們需要建立一個 html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"bundle.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>當啟動 webpack-dev-server 之後，預設我們就可以透過 <code>localhost:8080</code> 來存取網站，而上面的設定檔加上了 <code>publicPath</code> 所以結果網址會是 <code>localhost:8080/assets/</code></p>
<h3 id="即時更新模式-Hot-mode"><a href="#即時更新模式-Hot-mode" class="headerlink" title="即時更新模式(Hot mode)"></a>即時更新模式(Hot mode)</h3><p>透過把專用的 script 加到 index.html，您的專案就會得到 live reload 的功能。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- It is important that you point to the full url --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://localhost:8080/webpack-dev-server.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"bundle.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>對了，這個功能當然也需要修改一點點設定</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="attr">entry</span>: &#123;</div><div class="line">    <span class="attr">app</span>: [<span class="string">"webpack/hot/dev-server"</span>, <span class="string">"./app/main.js"</span>]</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">output</span>: &#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">"./build"</span>,</div><div class="line">    <span class="attr">filename</span>: <span class="string">"bundle.js"</span></div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>然後執行指令時要加入 <code>--hot</code> 參數</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ webpack-dev-server --content-base build/ --hot</div></pre></td></tr></table></figure>
<h3 id="即時更新模式-訊息顯示"><a href="#即時更新模式-訊息顯示" class="headerlink" title="即時更新模式 + 訊息顯示"></a>即時更新模式 + 訊息顯示</h3><p>當您啟動了 webpack-dev-server 您也可以瀏覽 <code>localhost:8080/webpack-dev-server/</code> 透過這個連結您不只會看到您的內容，同時上方會有一些訊息提示。<br>並且如果您採用這個連結，檔案並不需要加入剛剛那支特殊的 <code>webpack-dev-server script</code><br>所以一般建議的開發流程我們的 html 不用特地加入 script 然後使用 <code>localhost:8080/webpack-dev-server/</code> 來觀察其結果。</p>
<img src="/2015/07/23/webpack/webpack-6.png" alt="webpack-6.png" title="">
<blockquote>
<p>因為 index.html 大多數的時候不會需要靠 webpack 編譯(除非您改用 jade 或 slim)，所以當然不會被列在 watch 的檔案中。</p>
</blockquote>
<h3 id="webpack-dev-server-指令與參數"><a href="#webpack-dev-server-指令與參數" class="headerlink" title="webpack-dev-server 指令與參數"></a>webpack-dev-server 指令與參數</h3><p>一般來說所有的 webpack 參數同等於 webpack-dev-server 參數，不過 <code>output</code> 除外。當然您也可以透過 <code>--config</code> 來指定設定檔。<br>下面是一些額外的參數</p>
<ul>
<li><code>--content-base</code>: 指定專案目錄</li>
<li><code>--quiet</code>: 不要輸出任何資訊到 console</li>
<li><code>--colors</code>: 彩色的輸出資訊</li>
<li><code>--no-info</code>: 去除一些不太必要的資訊</li>
<li><code>--host</code>: 設定 hostname 或 IP</li>
<li><code>--port &lt;number&gt;</code>: 設定 port</li>
<li><code>--inline</code>: 內嵌一個 webpack-dev-server 到封裝裡</li>
<li><code>--hot</code>: 加入 <code>HotModuleReplacementPlugin</code> 並切換到即時更新模式 hot mode ，注意不能加入該 plugins 兩次</li>
<li><code>--https</code>: 啟用 https 協定</li>
</ul>
<p>上面這些參數都可以加入 webpack.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="comment">// ... webpack.config.js stuff ...</span></div><div class="line">    devServer: &#123;</div><div class="line">        <span class="attr">contentBase</span>: <span class="string">"./build"</span>,</div><div class="line">        <span class="attr">noInfo</span>: <span class="literal">true</span>, <span class="comment">//  --no-info option</span></div><div class="line">        hot: <span class="literal">true</span>,</div><div class="line">        <span class="attr">inline</span>: <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="深入-loaders"><a href="#深入-loaders" class="headerlink" title="深入 loaders"></a>深入 loaders</h1><h3 id="何謂-loaders"><a href="#何謂-loaders" class="headerlink" title="何謂 loaders ?"></a>何謂 loaders ?</h3><p>loaders 就是轉換工具，用來把資源檔也就是我們的 js, css 等等這些模組轉換套用到程式上。它們是 node.js 中執行的函式，將資源檔當作參數取得其中的程式碼，轉換並傳回新的程式碼。舉例來說您可以使用 loaders 來告訴 webpack 如何處理並載入 CoffeeScript 或 JSX</p>
<h3 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h3><ul>
<li>loader 可以被串連使用，即把一個資源檔從 A loader 交付給 B loader。講的太難懂，那我們先舉個在 Linux 底下所謂的 pipeline 的例子 <code>ls | grep filename</code> 在 Linux 底下我們可以透過 <code>|</code> 來做 pipeline，其行為就是先執行 <code>ls</code> 指令再把 <code>ls</code> 處理完的結果交給下一個指令。<br>在上面的例子中 <code>require(&quot;!style!css!./style.css&quot;);</code> 就是一樣的意思把 <code>style.css</code> 交給 <code>css-loader</code> 先處理，處理完的結果再交給 <code>style-loader</code>。最終 loader 被預期傳回 Javascript，其他過程中的 loader 則可以傳回任意格式。</li>
<li>loader 可以套用同步或者非同步的行為</li>
<li>loader 運行在 node.js 環境中，且應該可以做到任何您想要的功能</li>
<li>loader 允許加入參數，其格式就像 HTTP 的 querystring 一樣，所以我們可以在設定檔或指令中帶入參數</li>
<li>loader 可以針對副檔名或正規表示式來設定要處理的檔案</li>
<li>loader 可以透過 npm 來發佈或安裝</li>
<li>除了正常 <code>package.json</code> 的 <code>main</code>，一般模組就我們在寫 JS 的 <code>module.exports</code> 也可以匯出 loader</li>
<li>loader 可以存取設定檔</li>
<li>擴充套件可以賦予 loader 更多功能</li>
<li>loader 可以散播額外的任意檔案</li>
<li>其他</li>
</ul>
<p>如果您對其他 loader 範例有興趣可以參考<a href="http://webpack.github.io/docs/list-of-loaders.html" target="_blank" rel="external">列表</a></p>
<h3 id="解析-loader"><a href="#解析-loader" class="headerlink" title="解析 loader"></a>解析 loader</h3><p>loader 被解析的方式類似於模組。一個 loader 模組一般來說會需要輸出一個 function，且與 node.js 相容的 Javascript。在大部份的情況下我們透過 npm 來管理 loader<br>不過您也可以將 loader 當作程式中的檔案來處理</p>
<h3 id="參考-匯入-loader"><a href="#參考-匯入-loader" class="headerlink" title="參考(匯入) loader"></a>參考(匯入) loader</h3><p>雖然這不是強制的，但依照慣例 loader 通常命名微 <code>xxx-loader</code>，而 <code>xxx</code> 就是其功能與描述的名稱也是我們在 pipeline 使用的名稱。例如 <code>json-loader</code><br>您也許會用完整名稱來引用該 loader(json-loader) 或者透過縮寫即 json<br>關於 loader 命名慣例和搜尋的優先順序被定義在 webpack 設定檔的 <code>resolveLoader.moduleTemplates</code></p>
<h3 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h3><p>如果 loader 存在，通常我們會直接透過 npm 安裝</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm install xxx-loader --save</div><div class="line">$ npm install xxx-loader --save-dev</div></pre></td></tr></table></figure>
<h3 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h3><p>在您的專案中可以使用不同的方式來使用 loader</p>
<ul>
<li>明確的寫在 <code>require</code> 中</li>
<li>在設定檔指定</li>
<li>直接透過指令參數設定</li>
</ul>
<h3 id="明確的寫在-require-中"><a href="#明確的寫在-require-中" class="headerlink" title="明確的寫在 require 中"></a>明確的寫在 <code>require</code> 中</h3><p>注意: 盡量避免使用這種方式，而採用設定檔的慣例來設定 loader<br>這種方式是透過在 <code>require</code> 語句(或者 <code>define</code>, <code>require.ensure</code>) 中指定會採用的 loaders。透過 <code>!</code> 將 loader 區隔。<br>此時會相對於當前目錄去解析路徑</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">"./loader!./dir/file.txt"</span>);</div><div class="line"><span class="comment">// =&gt; 使用在該目錄下的 loader.js 檔案來轉換 dir/file.txt 檔案</span></div><div class="line"></div><div class="line"><span class="built_in">require</span>(<span class="string">"jade!./template.jade"</span>);</div><div class="line"><span class="comment">// =&gt; 使用 jade-loader (npm 安裝的模組) 來轉換 template.jade</span></div><div class="line"></div><div class="line"><span class="built_in">require</span>(<span class="string">"!style!css!less!bootstrap/less/bootstrap.less"</span>);</div><div class="line"><span class="comment">// =&gt; 將 bootstrap/less/bootstrap.less 檔案透過 less-loader 先轉換成 css 再將結果傳給 css-loader 最後傳給 style-loader</span></div></pre></td></tr></table></figure>
<h3 id="在設定檔中指定"><a href="#在設定檔中指定" class="headerlink" title="在設定檔中指定"></a>在設定檔中指定</h3><p>您也可以透過正規表示式 RegExp 來設定<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">module</span>: &#123;</div><div class="line">    <span class="attr">loaders</span>: [</div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.jade$/</span>, <span class="attr">loader</span>: <span class="string">"jade"</span> &#125;,</div><div class="line">      <span class="comment">// =&gt; jade loader 被用來處理 .jade 檔案</span></div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">loader</span>: <span class="string">"style!css"</span> &#125;,</div><div class="line">      <span class="comment">// =&gt; style-loader 和 css-loader 被用來處理 .css 檔案</span></div><div class="line">      <span class="comment">// =&gt; 下面是等價另一種格式的寫法</span></div><div class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">loader</span>: [<span class="string">"style"</span>, <span class="string">"css"</span>] &#125;,</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h3><p>當然您也可以透過指令參數來設定對應的 loaders</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ webpack --module-bind jade --module-bind <span class="string">'css=style!css'</span></div></pre></td></tr></table></figure>
<p>上面的指令會讓 jade-loader 對應處理 <code>.jade</code> 檔案，然後 style-loader 和 css-loader 針對 css 檔案</p>
<h3 id="loader-參數-Query-parameters"><a href="#loader-參數-Query-parameters" class="headerlink" title="loader 參數(Query parameters)"></a>loader 參數(Query parameters)</h3><p>loader 可以透過在設定傳入參數，格式類似網址的 query string。這個參數只要在該 loader 後面加上 <code>?</code> 舉例來說 <code>url-loader?mimetype=image/png</code></p>
<p>注意: 至於 query string 的格式則是由 loader 來決定。通常會在該 loader 的文件上說明。大部份的 loader 參數的格式會是 <code>?key=value&amp;hey=hi</code> 或者 <code>?{&quot;key&quot;: &quot;value&quot;, &quot;key2&quot;: &quot;value2&quot;}</code><br>整個設定寫起來會如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">"url-loader?mimetype=image/png!./file.png"</span>);</div></pre></td></tr></table></figure>
<p>用在設定檔中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123; <span class="attr">test</span>: <span class="regexp">/\.png$/</span>, <span class="attr">loader</span>: <span class="string">"url-loader?mimetype=image/png"</span> &#125;</div></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">test</span>: <span class="regexp">/\.png$/</span>,</div><div class="line">    <span class="attr">loader</span>: <span class="string">"url-loader"</span>,</div><div class="line">    <span class="attr">query</span>: &#123; <span class="attr">mimetype</span>: <span class="string">"image/png"</span> &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="使用擴充套件"><a href="#使用擴充套件" class="headerlink" title="使用擴充套件"></a>使用擴充套件</h1><p>擴充套件就是文件上說的 plugins，它是透過 webpack.config.js 的 <code>plugins</code> 屬性來載入模組之中，如下面設定</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">"webpack"</span>);</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">plugins</span>: [</div><div class="line">        <span class="keyword">new</span> webpack.ResolverPlugin([</div><div class="line">            <span class="keyword">new</span> webpack.ResolverPlugin.DirectoryDescriptionFilePlugin(<span class="string">"bower.json"</span>, [<span class="string">"main"</span>])</div><div class="line">        ], [<span class="string">"normal"</span>, <span class="string">"loader"</span>])</div><div class="line">    ]</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="其他擴充套件"><a href="#其他擴充套件" class="headerlink" title="其他擴充套件"></a>其他擴充套件</h3><p>如果不是內建的 plugins 則通常需要透過 npm 來安裝，裝完之後照下面這樣使用即可</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ComponentPlugin = <span class="built_in">require</span>(<span class="string">"component-webpack-plugin"</span>);</div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">plugins</span>: [</div><div class="line">        <span class="keyword">new</span> ComponentPlugin()</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h1><p>經過一輪練習之後，如果您要使用 webpack-dev-server 在設定上路徑會是比較需要注意的地方，然後就是記得 webpack-dev-server 的輸出會放在記憶體。<br>雖然現在官方文件比較沒有詳細的範例，不過您還是可以找到<a href="https://leanpub.com/survivejs_webpack_react" target="_blank" rel="external">其他</a>。<br>希望在這篇之後各位能夠對這個起手式有些認識也應該都具有使用 webpack 的基礎能力。</p>
<p><a href="https://github.com/webpack/webpack/tree/master/examples/multiple-entry-points" target="_blank" rel="external">示範多檔編譯</a><br><a href="https://fakefish.github.io/react-webpack-cookbook/Introduction-to-Webpack.html" target="_blank" rel="external">Webpack + React 中文</a><br><a href="http://clarkdave.net/2015/01/how-to-use-webpack-with-rails/" target="_blank" rel="external">Webpack with Rails</a><br><a href="http://gaearon.github.io/react-hot-loader/getstarted/" target="_blank" rel="external">react-hot-loader</a><br><a href="http://rhadow.github.io/2015/05/30/webpack-loaders-and-plugins/" target="_blank" rel="external">深入了解 webpack plugins</a></p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://andyyou.github.io/2015/07/23/webpack/" data-id="ciu438ct80076b5cw30x0cr5t" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2015/08/11/understand-bem-again/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">上一篇</strong>
            <div class="article-nav-title">
                
                    再讀一遍 BEM
                
            </div>
        </a>
    
    
        <a href="/2015/05/21/js-unicode-issue/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">Javascript Unicode</div>
        </a>
    
</nav>


    
</article>


    
    <section id="comments">
    
    </section>

</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">分類</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Cloud/">Cloud</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Fun/">Fun</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mobile/">Mobile</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Program/">Program</a><span class="category-list-count">91</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/">System</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tools/">Tools</a><span class="category-list-count">14</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">歸檔</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">十二月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">十一月 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">十月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">九月 2014</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">八月 2014</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">二月 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">一月 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">十一月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">十月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">九月 2013</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">八月 2013</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">三月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/03/">三月 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/01/">一月 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/11/">十一月 2011</a><span class="archive-list-count">3</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">標籤</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/net-mvc/">.net mvc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RoR/">RoR</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/api/">api</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aws/">aws</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/azure/">azure</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bot/">bot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bundler/">bundler</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cache/">cache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/carrier-wave/">carrier wave</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos/">centos</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chrome/">chrome</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/compass/">compass</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/devise/">devise</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/entity-framework/">entity framework</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/">es6</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/facebook/">facebook</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flux/">flux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/framework/">framework</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gulp/">gulp</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iisexpress/">iisexpress</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios/">ios</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">43</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jekyll/">jekyll</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jspm/">jspm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jwt/">jwt</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mechanism/">mechanism</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oocss/">oocss</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/osx/">osx</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/package-manager/">package manager</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/postgresql/">postgresql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rack-server/">rack server</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/raspberry-pi/">raspberry-pi</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-native/">react native</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reactjs/">reactjs</a><span class="tag-list-count">31</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redux/">redux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ruby/">ruby</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sass/">sass</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/selenium/">selenium</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/slim/">slim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssl/">ssl</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/task-runner/">task runner</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/">windows</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xml/">xml</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">標籤雲</h3>
        <div class="widget tagcloud">
            <a href="/tags/net-mvc/" style="font-size: 10px;">.net mvc</a> <a href="/tags/RoR/" style="font-size: 16.67px;">RoR</a> <a href="/tags/api/" style="font-size: 10px;">api</a> <a href="/tags/aws/" style="font-size: 10px;">aws</a> <a href="/tags/azure/" style="font-size: 11.11px;">azure</a> <a href="/tags/bot/" style="font-size: 10px;">bot</a> <a href="/tags/bundler/" style="font-size: 11.11px;">bundler</a> <a href="/tags/cache/" style="font-size: 10px;">cache</a> <a href="/tags/carrier-wave/" style="font-size: 11.11px;">carrier wave</a> <a href="/tags/centos/" style="font-size: 10px;">centos</a> <a href="/tags/chrome/" style="font-size: 10px;">chrome</a> <a href="/tags/compass/" style="font-size: 10px;">compass</a> <a href="/tags/css/" style="font-size: 17.78px;">css</a> <a href="/tags/devise/" style="font-size: 10px;">devise</a> <a href="/tags/docker/" style="font-size: 11.11px;">docker</a> <a href="/tags/entity-framework/" style="font-size: 10px;">entity framework</a> <a href="/tags/es6/" style="font-size: 12.22px;">es6</a> <a href="/tags/facebook/" style="font-size: 10px;">facebook</a> <a href="/tags/flux/" style="font-size: 10px;">flux</a> <a href="/tags/framework/" style="font-size: 11.11px;">framework</a> <a href="/tags/grunt/" style="font-size: 13.33px;">grunt</a> <a href="/tags/gulp/" style="font-size: 12.22px;">gulp</a> <a href="/tags/heroku/" style="font-size: 10px;">heroku</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/iisexpress/" style="font-size: 10px;">iisexpress</a> <a href="/tags/ios/" style="font-size: 12.22px;">ios</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/jekyll/" style="font-size: 11.11px;">jekyll</a> <a href="/tags/jspm/" style="font-size: 10px;">jspm</a> <a href="/tags/jwt/" style="font-size: 10px;">jwt</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/mechanism/" style="font-size: 10px;">mechanism</a> <a href="/tags/mongodb/" style="font-size: 11.11px;">mongodb</a> <a href="/tags/nodejs/" style="font-size: 15.56px;">nodejs</a> <a href="/tags/oocss/" style="font-size: 10px;">oocss</a> <a href="/tags/osx/" style="font-size: 14.44px;">osx</a> <a href="/tags/package-manager/" style="font-size: 15.56px;">package manager</a> <a href="/tags/php/" style="font-size: 11.11px;">php</a> <a href="/tags/postgresql/" style="font-size: 10px;">postgresql</a> <a href="/tags/rack-server/" style="font-size: 10px;">rack server</a> <a href="/tags/raspberry-pi/" style="font-size: 10px;">raspberry-pi</a> <a href="/tags/react-native/" style="font-size: 10px;">react native</a> <a href="/tags/reactjs/" style="font-size: 18.89px;">reactjs</a> <a href="/tags/redux/" style="font-size: 10px;">redux</a> <a href="/tags/ruby/" style="font-size: 16.67px;">ruby</a> <a href="/tags/sass/" style="font-size: 11.11px;">sass</a> <a href="/tags/selenium/" style="font-size: 10px;">selenium</a> <a href="/tags/slim/" style="font-size: 10px;">slim</a> <a href="/tags/ssl/" style="font-size: 10px;">ssl</a> <a href="/tags/task-runner/" style="font-size: 12.22px;">task runner</a> <a href="/tags/vuejs/" style="font-size: 12.22px;">vuejs</a> <a href="/tags/webpack/" style="font-size: 12.22px;">webpack</a> <a href="/tags/windows/" style="font-size: 10px;">windows</a> <a href="/tags/xml/" style="font-size: 10px;">xml</a>
        </div>
    </div>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2016 andyyou(You,ZongYan)
        </div>
    </div>
</footer>

        

    
        <script src="/vendor/lightgallery/js/lightgallery.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-pager.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-hash.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-share.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-video.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>