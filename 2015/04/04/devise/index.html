<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>Devise 快速上手 | DEVLOG of andyyou</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="devise 使用筆記Devise 是一套彈性的驗證機制解決方案，它是根據 Warden 為架構的基礎延伸的。Devise 本身具備

支援 rake
架構在 Rails 之上提供完整的 MVC 方案
提供您可以使用多個 Model 在同一時間登入
模組化，您只需要採用您需要的部份">
<meta property="og:type" content="article">
<meta property="og:title" content="Devise 快速上手">
<meta property="og:url" content="http://andyyou.github.io/2015/04/04/devise/index.html">
<meta property="og:site_name" content="DEVLOG of andyyou">
<meta property="og:description" content="devise 使用筆記Devise 是一套彈性的驗證機制解決方案，它是根據 Warden 為架構的基礎延伸的。Devise 本身具備

支援 rake
架構在 Rails 之上提供完整的 MVC 方案
提供您可以使用多個 Model 在同一時間登入
模組化，您只需要採用您需要的部份">
<meta property="og:updated_time" content="2016-10-10T13:22:24.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Devise 快速上手">
<meta name="twitter:description" content="devise 使用筆記Devise 是一套彈性的驗證機制解決方案，它是根據 Warden 為架構的基礎延伸的。Devise 本身具備

支援 rake
架構在 Rails 之上提供完整的 MVC 方案
提供您可以使用多個 Model 在同一時間登入
模組化，您只需要採用您需要的部份">
    

    

    
        <link rel="icon" href="/images/favicon.png" />
    

    <link rel="stylesheet" href="/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/vendor/open-sans/styles.css">
    <link rel="stylesheet" href="/vendor/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/vendor/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/vendor/lightgallery/css/lightgallery.min.css">
    
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-39208536-1', 'auto');
ga('send', 'pageview');

</script>
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">DEVLOG of andyyou</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="https://avatars2.githubusercontent.com/u/665690?v=3&amp;s=466" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜尋" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: 'Pages',
            CATEGORIES: '分類',
            TAGS: '標籤',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜尋" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="https://avatars2.githubusercontent.com/u/665690?v=3&amp;s=466" />
            <h2 id="name">andyyou</h2>
            <h3 id="title">Web Developer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Taipei, Taiwan</span>
            <a id="follow" target="_blank" href="https://github.com/andyyou">關注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                130
                <span>文章</span>
            </div>
            <div class="article-info-block">
                54
                <span>標籤</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/andyyou" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://www.linkedin.com/pub/zongyan-you/2a/493/16" target="_blank" title="linkedin" class=tooltip>
                            <i class="fa fa-linkedin"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-devise" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            Devise 快速上手
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2015/04/04/devise/">
            <time datetime="2015-04-04T04:05:00.000Z" itemprop="datePublished">2015-04-04</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Program/">Program</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/RoR/">RoR</a>, <a class="tag-link" href="/tags/devise/">devise</a>, <a class="tag-link" href="/tags/ruby/">ruby</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h2 id="devise-使用筆記"><a href="#devise-使用筆記" class="headerlink" title="devise 使用筆記"></a>devise 使用筆記</h2><p><code>Devise</code> 是一套彈性的驗證機制解決方案，它是根據 Warden 為架構的基礎延伸的。<code>Devise</code> 本身具備</p>
<ul>
<li>支援 rake</li>
<li>架構在 Rails 之上提供完整的 MVC 方案</li>
<li>提供您可以使用多個 Model 在同一時間登入</li>
<li>模組化，您只需要採用您需要的部份</li>
</ul>
<a id="more"></a>
<p>整體是由 10 個模組組成</p>
<ul>
<li><a href="http://www.rubydoc.info/github/plataformatec/devise/master/Devise/Models/DatabaseAuthenticatable" target="_blank" rel="external">Database Authenticatable</a> 加密並儲存密碼於資料用以驗證使用者身份。驗證機制可以透過 POST 或者 HTTP 基本的驗證方式</li>
<li><a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Omniauthable" target="_blank" rel="external">Omniauthable</a> 加入 OmniAuth(<a href="https://github.com/intridea/omniauth" target="_blank" rel="external">https://github.com/intridea/omniauth</a>) 的支援</li>
<li><a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Confirmable" target="_blank" rel="external">Confirmable</a> 寄送 Email 與確認機制驗證帳號是否正確與啟用</li>
<li><a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Recoverable" target="_blank" rel="external">Recoverable</a> 重設密碼與寄送 Reset 信件</li>
<li><a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Registerable" target="_blank" rel="external">Registerable</a> 處理註冊流程包含帳號本身的編輯與刪除</li>
<li><a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Rememberable" target="_blank" rel="external">Rememberable</a> 管理 Token 的產生與清除，這些資訊會被存在使用端的 cookie</li>
<li><a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Trackable" target="_blank" rel="external">Trackable</a> 追蹤紀錄登入的次數，時間與 IP</li>
<li><a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Validatable" target="_blank" rel="external">Validatable</a> 提供信箱和密碼的驗證機制。此部分並沒有強制使用且可以根據不同的情況客製，您可以自行定義您的驗證機制</li>
<li><a href="http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Lockable" target="_blank" rel="external">Lockable</a> 提供鎖定機制，當帳號不斷登入失敗時會啟用。同時提供 Email 解鎖的機制</li>
</ul>
<p>Devise 確保能夠在 <code>YARV</code>, <code>JRuby</code> 環境下執行緒安全(Thread-Safe)，簡單的說即在多執行緒的情況下確保變數(通常是全域變數)是正確一致的。</p>
<h1 id="資訊"><a href="#資訊" class="headerlink" title="資訊"></a>資訊</h1><h2 id="Devise-wiki"><a href="#Devise-wiki" class="headerlink" title="Devise wiki"></a>Devise wiki</h2><p>Devise wiki 提供許多關於 Devise 的資料包含 <code>how-to</code> 的文章以及常見問題的答案。當您完成這個 README 文件的閱讀後請記得瀏覽 <a href="https://github.com/plataformatec/devise/wiki" target="_blank" rel="external">wiki</a></p>
<h2 id="Bug-回報"><a href="#Bug-回報" class="headerlink" title="Bug 回報"></a>Bug 回報</h2><p>如果您發現問題，我們希望您能告知我們。然後我們希望當您想要回報時可以遵循一些<a href="https://github.com/plataformatec/devise/wiki/Bug-reports" target="_blank" rel="external">規範</a><br>如果您發現關於安全問題的 bug ，請不要使用 Github 上面的 Issue 回報，請直接發 Mail 到 opensource@plataformatec.com.br</p>
<h2 id="郵件列表"><a href="#郵件列表" class="headerlink" title="郵件列表"></a>郵件列表</h2><p>如果您有任何問題，意見或疑慮，請使用 Google Group 告知我們而不是在 Github 上面開 Issues</p>
<p><a href="https://groups.google.com/group/plataformatec-devise" target="_blank" rel="external">https://groups.google.com/group/plataformatec-devise</a></p>
<h2 id="RDocs"><a href="#RDocs" class="headerlink" title="RDocs"></a>RDocs</h2><p>當然您可以查閱 RDoc 格式的 Devise 文件在下面連結</p>
<p><a href="http://rubydoc.info/github/plataformatec/devise/master/frames" target="_blank" rel="external">http://rubydoc.info/github/plataformatec/devise/master/frames</a></p>
<p>如果您需要使用舊版的 Rails 搭配 Devise 您可以在指令介面執行 <code>gem server</code> 來存取舊版的文件。</p>
<h2 id="程式範例"><a href="#程式範例" class="headerlink" title="程式範例"></a>程式範例</h2><p>這邊有一些程式範例放在 Github 上面，它們展示了 Devise 各種不一樣的功能同時也有搭配不同版本 Rails 的範例，如下面連結</p>
<p><a href="https://github.com/plataformatec/devise/wiki/Example-Applications" target="_blank" rel="external">https://github.com/plataformatec/devise/wiki/Example-Applications</a></p>
<h2 id="套件"><a href="#套件" class="headerlink" title="套件"></a>套件</h2><p>我們的社群已經建立了很多的擴展套件，它們可以幫您加上其他的功能，您可以參考下面連結根據您的需求使用</p>
<p><a href="https://github.com/plataformatec/devise/wiki/Extensions" target="_blank" rel="external">https://github.com/plataformatec/devise/wiki/Extensions</a></p>
<h2 id="貢獻"><a href="#貢獻" class="headerlink" title="貢獻"></a>貢獻</h2><p>我們希望您可以考慮協作 Devise。如果要執行測試，請進入 Devise 的頂層目錄並執行 <code>bundle install</code> -&gt; <code>rake</code> 為了通過這些測試您會需要使用 MongoDB Server</p>
<h1 id="與-Rails-整合"><a href="#與-Rails-整合" class="headerlink" title="與 Rails 整合"></a>與 Rails 整合</h1><p>如果您是第一次建立 Rails 應用程式我們建議您不要使用 Devise。Devise 需要您對於 Rails Framework 有足夠的了解。如果是這種情況我們建議您先使用一些簡單的驗證機制</p>
<ul>
<li><a href="https://www.railstutorial.org/book/modeling_users" target="_blank" rel="external">Michael Hartl’s online book</a></li>
<li><a href="http://railscasts.com/episodes/250-authentication-from-scratch" target="_blank" rel="external">Ryan Bates’ Railscast</a></li>
</ul>
<p>一旦您對於 Rails 和驗證機制有充足的認識，我們保證 Devise 將會讓您開發更便捷。</p>
<h1 id="入門"><a href="#入門" class="headerlink" title="入門"></a>入門</h1><p>Devise 3.0 需搭配 Rails 3.2 以上版本。您可以先在 Gemfile 加入:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gem <span class="string">'devise'</span></div></pre></td></tr></table></figure>
<p>接著執行  <code>bundle install</code> 安裝它。<br>在完成安裝之後，您需要執行 generator 來自動安裝和變更一些設定</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ rails genereate devise:install</div></pre></td></tr></table></figure>
<p>這個 generator 會安裝一個 <code>initializer</code> 其內容是用來描述所有 devise 的設定。通常您需要查看一下這隻檔案 <code>config/initializers/devise.rb</code><br>在您完成這個步驟之後您已經可以使用 generator 將 devise 加入到任何 model</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ rails generate devise MODEL</div></pre></td></tr></table></figure>
<p>將 <code>MODEL</code> 的地方取代成您要的 model name ，這個 model 在程式中代表使用者(通常我們使用 <code>User</code> 或者 <code>Admin</code>)。一旦執行該指令會產生一個 model (請確保 model 不重複)<br>以及設定其為預設的 devise 模組。注意：這個指令同時也會設定您的 <code>config/routes.rb</code> 檔案，幫您把路由指定到 devise controller</p>
<p>接著我們檢查 MODEL 看看是否要增加其他的設定，您可能會想要加入像是 <code>confirmable</code> 或 <code>lockable</code> 的功能。如果您開啟這個選項，請記得到 <code>migration</code> 檔案檢查欄位設定，去把適當的屬性註解拿掉，因為 migration 才是實際調整資料庫的地方。舉例來說如果您在 model 中加入 <code>:confirmable</code> 支援那麼就需要去把 migration 中跟 confirmable 相關的部分註解也拿掉。接著執行 <code>rake db:migrate</code></p>
<p>下一步您需要設定預設的 URL 給 devise 的 mailer 使用，下面提供一個範例設定</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">config.action_mailer.default_url_options = &#123; <span class="symbol">host:</span> <span class="string">'localhost'</span>, <span class="symbol">port:</span> <span class="number">3000</span> &#125;</div></pre></td></tr></table></figure>
<p>在完成修改之後需要重啟應用程式，否則您將會看到錯誤訊息。</p>
<h1 id="Controller-filters-和-helpers"><a href="#Controller-filters-和-helpers" class="headerlink" title="Controller filters 和 helpers"></a>Controller filters 和 helpers</h1><p>devise 會幫我們建立一些 helpers 讓我們可以在 controller 和 view 裡面使用。例如要設定一個 controller 需要驗證，只要在 <code>before_action</code> (例如您的 model 叫作 User)加入</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 限制 controller 的使用權限</span></div><div class="line">before_action <span class="symbol">:authenticate_user!</span></div></pre></td></tr></table></figure>
<p>如果您的 devise model 是其他名稱則把 _user 的部分換掉，例如 model 叫 admin 則換成 <code>authenticate_admin!</code> 下面的 helper 都是以此類推。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 判斷是否登入</span></div><div class="line">user_signed_in?</div><div class="line"></div><div class="line"><span class="comment"># 取得當前使用者</span></div><div class="line">current_user</div><div class="line"></div><div class="line"><span class="comment"># 存取 session</span></div><div class="line">user_session</div></pre></td></tr></table></figure>
<p>當使用者執行了登入，啟用帳號，更新密碼之後，devise 會找尋 scope 內的 <code>root_path</code>。具體舉例來說當我們使用了 <code>:user</code> 的 resources<br>就會去找 <code>user_root_path</code> 如果存在就會用它，否則預設會去找 <code>root_path</code>，意思是我們至少需要設定 root_path</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">root <span class="symbol">to:</span> <span class="string">"home#index"</span></div><div class="line"></div><div class="line">namespace <span class="symbol">:user</span> <span class="keyword">do</span></div><div class="line">  root <span class="symbol">to:</span> <span class="string">'home#index'</span> <span class="comment"># 路徑會是 /user/home#index</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>您也可以覆寫 <code>after_sign_in_path_for</code> 和 <code>after_sign_out_path_for</code> 到您自訂的 redirect_to 程式碼片段</p>
<p>注意如果您的 devise model 叫 <code>Member</code> 而不是 <code>User</code> 的話，那麼 helpers 會完全不一樣</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">before_action <span class="symbol">:authenticate_member!</span></div><div class="line">member_singned_in?</div><div class="line">current_member</div><div class="line">member_session</div></pre></td></tr></table></figure>
<h1 id="設定-Model"><a href="#設定-Model" class="headerlink" title="設定 Model"></a>設定 Model</h1><p>關於 devise model 內的方法(method) 也允許我們做一些額外的設定，例如您可以選擇加密的演算法</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> &lt; ActiveRecord::Base</span></div><div class="line">  devise <span class="symbol">:database_authenticatable</span>, <span class="symbol">:registerable</span>, <span class="symbol">:confirmable</span>, <span class="symbol">:recoverable</span>, <span class="symbol">stretches:</span> <span class="number">20</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>除了 <code>:stretches</code>，您還可以定義 <code>:pepper</code>, <code>:encryptor</code>, <code>:confirm_within</code>, <code>:remember_for</code>, <code>:timeout_in</code>, <code>:unlock_in</code><br>想取得更詳細的資料可以看 <code>initializer</code> 檔案，這隻檔案就是我們執行 <code>rails generate devise:install</code> 時產生的。<br>這隻檔案預設在 <code>config/initializers/devise.rb</code></p>
<h2 id="Strong-Parameters-核可參數"><a href="#Strong-Parameters-核可參數" class="headerlink" title="Strong Parameters 核可參數"></a>Strong Parameters 核可參數</h2><p>核可參數提供了一個介面來防止使用者亂送參數，阻止送 Action Controller 的參數被用在 Model 中，除非參數被加到白名單，此外參數也可以被註記為 required 必須。</p>
<p>當您客製化了您的 view，最終您可能要加入新的屬性(attributes)到您的 form。Rails 4 把參數的防護措施從 Model 移到了 Controller，造成 devise 也把處理機制換到了 controller</p>
<p>在 devise 只有三個 action 允許您設定參數是否允許通過傳到 model，這是因為必要的防護機制。它們的名稱和 <code>permitted parameters</code> 允許參數預設值如下</p>
<ul>
<li>sign_in(Devise::SessionsController#create) - 只允許驗證 key 通過(如 email)</li>
<li>sign_up(Devise::RegistrationsController#create) - key 和 password, password_confirmation 三個</li>
<li>account_update(Devise::RegistrationsController#update) - key, password, password_confirmation, current_password</li>
</ul>
<p>根據您想要放行額外的參數您可以簡單的在 <code>ApplicationController</code> 的 before_action</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ApplicationController</span> &lt; ActionController::Base</span></div><div class="line">  before_action <span class="symbol">:configure_permitted_parameters</span>, <span class="symbol">if:</span> <span class="symbol">:devise_controller?</span></div><div class="line"></div><div class="line">  protected</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">configure_permitted_parameters</span></span></div><div class="line">    devise_parameter_sanitizer.<span class="keyword">for</span>(<span class="symbol">:sign_up</span>) &lt;&lt; <span class="symbol">:username</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>上面這段範例可以協助您增加額外的欄位。如果您需要的是巢狀的屬性(物件)換句話說您正使用 <code>accepts_nested_attributes_for</code> ，這樣的話您就需要<br>告訴 devise 關於這個物件的資訊，devise 讓您可以透過一個 block 來修改預設值</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">configure_permitted_parameters</span></span></div><div class="line">  devise_parameter_sanitizer.<span class="keyword">for</span>(<span class="symbol">:sign_in</span>) &#123; <span class="params">|u|</span> u.permit(<span class="symbol">:username</span>, <span class="symbol">:email</span>) &#125;</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>如果您在註冊的時候有一些 checkbox 用來表示使用者的權限(角色)，瀏覽器會把勾選的 checkbox 值當成一個陣列傳入。一個陣列並不屬於核可參數<br>這種情況的話我們可以照下面這樣做</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">configure_permitted_parameters</span></span></div><div class="line">  devise_parameter_sanitizer.<span class="keyword">for</span>(<span class="symbol">:sign_up</span>) &#123; <span class="params">| u |</span> u.permit(&#123; <span class="symbol">roles:</span> []&#125;, <span class="symbol">:email</span>, <span class="symbol">:password</span>, <span class="symbol">:password_confirmation</span>)&#125;</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>要查詢所有允許的準則和如何宣告內嵌物件和陣列的 permitted keys 請查閱<br><a href="https://github.com/rails/strong_parameters#nested-parameters" target="_blank" rel="external">https://github.com/rails/strong_parameters#nested-parameters</a></p>
<p>另外如果您有多個 devise model 您可能想要針對每個 model 設定不同的防護機制，這種情況下我們建議您直接繼承 <code>Devise::ParameterSanitizer</code></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">User::ParameterSanitizer</span> &lt; Devise::ParameterSanitizer</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sign_in</span></span></div><div class="line">    default_params.permit(<span class="symbol">:username</span>, <span class="symbol">:email</span>)</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>然後直接在 controller 內直接使用</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ApplicationController</span> &lt; ActionController::Base</span></div><div class="line">  protected</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">devise_parameter_sanitizer</span></span></div><div class="line">    <span class="keyword">if</span> resource_class == User</div><div class="line">      User::ParameterSanitizer.new(User, <span class="symbol">:user</span>, params)</div><div class="line">    <span class="keyword">else</span></div><div class="line">      <span class="keyword">super</span> <span class="comment"># Use the default one</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>上面這個範例覆寫了 User model 允許的參數，這樣 <code>:username</code> 和 <code>:email</code> 都會放行。</p>
<h2 id="設定-views"><a href="#設定-views" class="headerlink" title="設定 views"></a>設定 views</h2><p>官方建立了 devise 來協助您快速的開發讓您的程式具有驗證機制，然而並不是所有的狀況都剛好適用預設值，您可能會希望客製一些東西。<br>因為 devise 屬於一個引擎，所有的 view 都被打包在 gem 內部。這些 view 可以幫助您快速的開始，不過隨後您可能會希望修改它們，在這種情況下您可以<br>調用下面的指令把 view 從 gem 複製出來</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ rails generate devise:views</div></pre></td></tr></table></figure>
<p>如果您有超過一個的 devise model (例如 User 和 Admin) 您會注意到 devise 所有 model 都使用相同的 view ，幸運的是 devise 提供一個簡單的方法來自訂這些 views<br>您只需要在 <code>config/initializers/devise.rb</code> 中設定 <code>config.scoped_views = true</code></p>
<p>之後您就可以根據角色如 <code>users/sessions/new</code>, <code>admins/sessions/new</code> 提供不同的 views。如果在 scope 找不到 view，devise 會使用預設在 <code>devise/sessions/new</code> 的 view。 或者您可以使用 generator 來產生</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ rails g devise:views users</div></pre></td></tr></table></figure>
<p>如果您想要只產生部分的 views 例如 <code>registerable</code> 和 <code>confirmable</code> 模組，您可以傳入參數 <code>-v</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ rails g devise:views -v registrations confirmations</div></pre></td></tr></table></figure>
<h2 id="設定-controller"><a href="#設定-controller" class="headerlink" title="設定 controller"></a>設定 controller</h2><p>如果客製 view 的層級還不夠您使用，您甚至可以自訂 controller 如下</p>
<h4 id="1-建立您的-controller"><a href="#1-建立您的-controller" class="headerlink" title="1. 建立您的 controller"></a>1. 建立您的 controller</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ rails generate devise:controller [scope]</div></pre></td></tr></table></figure>
<p>如果您設定 users 來當作 scope 那麼 controllers 將會被建立在 <code>app/controllers/users/</code> 目錄下，而這些 session controller 會如下</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Users::SessionsController</span> &lt; Devise::SessionsController</span></div><div class="line">   <span class="comment"># GET /resource/sign_in</span></div><div class="line">   <span class="comment"># def new</span></div><div class="line">   <span class="comment">#   super</span></div><div class="line">   <span class="comment"># end</span></div><div class="line">   ...</div><div class="line"> <span class="keyword">end</span></div></pre></td></tr></table></figure>
<h4 id="2-設定-routes"><a href="#2-設定-routes" class="headerlink" title="2. 設定 routes"></a>2. 設定 routes</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">devise_for <span class="symbol">:users</span>, <span class="symbol">controllers:</span> &#123; <span class="symbol">sessions:</span> <span class="string">"users/sessions"</span> &#125;</div></pre></td></tr></table></figure>
<h4 id="3-從-devise-sessions-複製-views-到-users-sessions。因為-controller-已經被修改了，所以沒辦法使用預設的-devise-sessions-的-view"><a href="#3-從-devise-sessions-複製-views-到-users-sessions。因為-controller-已經被修改了，所以沒辦法使用預設的-devise-sessions-的-view" class="headerlink" title="3. 從 devise/sessions 複製 views 到 users/sessions。因為 controller 已經被修改了，所以沒辦法使用預設的 devise/sessions 的 view"></a>3. 從 <code>devise/sessions</code> 複製 views 到 <code>users/sessions</code>。因為 controller 已經被修改了，所以沒辦法使用預設的 <code>devise/sessions</code> 的 view</h4><h4 id="4-最後，修改-controller-的-actions"><a href="#4-最後，修改-controller-的-actions" class="headerlink" title="4. 最後，修改 controller 的 actions"></a>4. 最後，修改 controller 的 actions</h4><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Users::SessionsController</span> &lt; Devise::SessionsController</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">create</span></span></div><div class="line">    <span class="comment"># custom sign-in code</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>或者您也可以簡單呼叫父類別的行為</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Users::SessionsController</span> &lt; Devise::SessionsController</span></div><div class="line">   <span class="function"><span class="keyword">def</span> <span class="title">create</span></span></div><div class="line">     <span class="keyword">super</span> <span class="keyword">do</span> <span class="params">|resource|</span></div><div class="line">       BackgroundWorker.trigger(resource)</div><div class="line">     <span class="keyword">end</span></div><div class="line">   <span class="keyword">end</span></div><div class="line"> <span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>注意 devise 會使用 flash message 來讓使用者知道操作的結果。devise 預設您的程式會呼叫 <code>flash[:notice]</code> 和 <code>flash[:alert]</code></p>
<h2 id="設定路由"><a href="#設定路由" class="headerlink" title="設定路由"></a>設定路由</h2><p>devise 也提供預設的路由。如果您需要自訂他們，您可以透過 <code>devise_for</code> 方法。它提供了一些參數像是 <code>class_name</code>, <code>path_prefix</code> 等等</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">devise_for <span class="symbol">:users</span>, <span class="symbol">path:</span> <span class="string">"auth"</span>, <span class="symbol">path_names:</span> &#123; <span class="symbol">sign_in:</span> <span class="string">'login'</span>, <span class="symbol">sign_out:</span> <span class="string">'logout'</span>, <span class="symbol">password:</span> <span class="string">'secret'</span>, <span class="symbol">confirmation:</span> <span class="string">'verification'</span>, <span class="symbol">unlock:</span> <span class="string">'unblock'</span>, <span class="symbol">registration:</span> <span class="string">'register'</span>, <span class="symbol">sign_up:</span> <span class="string">'cmon_let_me_in'</span> &#125;</div></pre></td></tr></table></figure>
<p>您可能會需要根據 i18n 修改路徑</p>
<p>您可以再參考文件來瞭解更多關於 devise_for 的用法</p>
<p>如果您有需要在做更多的設定例如除了 <code>/users/sign_in</code> 還允許 <code>/sign_in</code> 可以做登入的動作，您只需要建立一個路由</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">devise_scope <span class="symbol">:user</span> <span class="keyword">do</span></div><div class="line">  get <span class="string">"sign_in"</span>, <span class="symbol">to:</span> <span class="string">"devise/sessions#new"</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>這樣一來您就多了一個 <code>/sign_in</code> 可以存取了</p>
<h2 id="I18n"><a href="#I18n" class="headerlink" title="I18n"></a>I18n</h2><p>devise 在 flash messages 使用了 i18n ，即您在 flash[:notice] 和 flash[:alert] 中的訊息是多國語系的，如果要針對訊息客製您可以在 local file 定義</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="attr">en:</span></div><div class="line"><span class="attr">  devise:</span></div><div class="line"><span class="attr">    sessions:</span></div><div class="line"><span class="attr">      signed_in:</span> <span class="string">'Signed in successfully.'</span></div></pre></td></tr></table></figure>
<p>您也可以根據 resources 區分不同的訊息，注意 scope 是單數</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="attr">en:</span></div><div class="line"><span class="attr">  devise:</span></div><div class="line"><span class="attr">    sessions:</span></div><div class="line"><span class="attr">      user:</span></div><div class="line"><span class="attr">        signed_in:</span> <span class="string">'Welcome user, you are signed in.'</span></div><div class="line"><span class="attr">      admin:</span></div><div class="line"><span class="attr">        signed_in:</span> <span class="string">'Hello admin!'</span></div></pre></td></tr></table></figure>
<p>devise mailer 使用簡單的格式來建立標題訊息</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="attr">en:</span></div><div class="line"><span class="attr">  devise:</span></div><div class="line"><span class="attr">    mailer:</span></div><div class="line"><span class="attr">      confirmation_instructions:</span></div><div class="line"><span class="attr">        subject:</span> <span class="string">'Hello everybody!'</span></div><div class="line"><span class="attr">        user_subject:</span> <span class="string">'Hello User! Please confirm your email'</span></div><div class="line"><span class="attr">      reset_password_instructions:</span></div><div class="line"><span class="attr">        subject:</span> <span class="string">'Reset instructions'</span></div></pre></td></tr></table></figure>
<h2 id="OmniAuth"><a href="#OmniAuth" class="headerlink" title="OmniAuth"></a>OmniAuth</h2><p>devise 同時支援 OmniAuth 讓您可以使用一些外部的驗證機制，要使用它們只需要把 <code>config/initializers/devise.rb</code> 的設定註解拿掉即可</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">config.omniauth <span class="symbol">:github</span>, <span class="string">'APP_ID'</span>, <span class="string">'APP_SECRET'</span>, <span class="symbol">scope:</span> <span class="string">'user,public_repo'</span></div></pre></td></tr></table></figure>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://andyyou.github.io/2015/04/04/devise/" data-id="ciu6poq2f005ow4cwy01p73pl" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2015/04/04/fix-jekyll-psych-issue/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">上一篇</strong>
            <div class="article-nav-title">
                
                    Jekyll - Psych::Nodes (NameError)
                
            </div>
        </a>
    
    
        <a href="/2015/04/04/ruby-notes/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">Ruby 快速筆記</div>
        </a>
    
</nav>


    
</article>


    
    <section id="comments">
    
    </section>

</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">分類</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Cloud/">Cloud</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Fun/">Fun</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mobile/">Mobile</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Program/">Program</a><span class="category-list-count">91</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/">System</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tools/">Tools</a><span class="category-list-count">14</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">歸檔</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">十二月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">十一月 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">十月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">九月 2014</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">八月 2014</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">二月 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">一月 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">十一月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">十月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">九月 2013</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">八月 2013</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">三月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/03/">三月 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/01/">一月 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/11/">十一月 2011</a><span class="archive-list-count">3</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">標籤</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/net-mvc/">.net mvc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RoR/">RoR</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/api/">api</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aws/">aws</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/azure/">azure</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bot/">bot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bundler/">bundler</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cache/">cache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/carrier-wave/">carrier wave</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos/">centos</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chrome/">chrome</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/compass/">compass</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/devise/">devise</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/entity-framework/">entity framework</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/">es6</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/facebook/">facebook</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flux/">flux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/framework/">framework</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gulp/">gulp</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iisexpress/">iisexpress</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios/">ios</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">43</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jekyll/">jekyll</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jspm/">jspm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jwt/">jwt</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mechanism/">mechanism</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oocss/">oocss</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/osx/">osx</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/package-manager/">package manager</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/postgresql/">postgresql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rack-server/">rack server</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/raspberry-pi/">raspberry-pi</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-native/">react native</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reactjs/">reactjs</a><span class="tag-list-count">31</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redux/">redux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ruby/">ruby</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sass/">sass</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/selenium/">selenium</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/slim/">slim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssl/">ssl</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/task-runner/">task runner</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/">windows</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xml/">xml</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">標籤雲</h3>
        <div class="widget tagcloud">
            <a href="/tags/net-mvc/" style="font-size: 10px;">.net mvc</a> <a href="/tags/RoR/" style="font-size: 16.67px;">RoR</a> <a href="/tags/api/" style="font-size: 10px;">api</a> <a href="/tags/aws/" style="font-size: 10px;">aws</a> <a href="/tags/azure/" style="font-size: 11.11px;">azure</a> <a href="/tags/bot/" style="font-size: 10px;">bot</a> <a href="/tags/bundler/" style="font-size: 11.11px;">bundler</a> <a href="/tags/cache/" style="font-size: 10px;">cache</a> <a href="/tags/carrier-wave/" style="font-size: 11.11px;">carrier wave</a> <a href="/tags/centos/" style="font-size: 10px;">centos</a> <a href="/tags/chrome/" style="font-size: 10px;">chrome</a> <a href="/tags/compass/" style="font-size: 10px;">compass</a> <a href="/tags/css/" style="font-size: 17.78px;">css</a> <a href="/tags/devise/" style="font-size: 10px;">devise</a> <a href="/tags/docker/" style="font-size: 11.11px;">docker</a> <a href="/tags/entity-framework/" style="font-size: 10px;">entity framework</a> <a href="/tags/es6/" style="font-size: 12.22px;">es6</a> <a href="/tags/facebook/" style="font-size: 10px;">facebook</a> <a href="/tags/flux/" style="font-size: 10px;">flux</a> <a href="/tags/framework/" style="font-size: 11.11px;">framework</a> <a href="/tags/grunt/" style="font-size: 13.33px;">grunt</a> <a href="/tags/gulp/" style="font-size: 12.22px;">gulp</a> <a href="/tags/heroku/" style="font-size: 10px;">heroku</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/iisexpress/" style="font-size: 10px;">iisexpress</a> <a href="/tags/ios/" style="font-size: 12.22px;">ios</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/jekyll/" style="font-size: 11.11px;">jekyll</a> <a href="/tags/jspm/" style="font-size: 10px;">jspm</a> <a href="/tags/jwt/" style="font-size: 10px;">jwt</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/mechanism/" style="font-size: 10px;">mechanism</a> <a href="/tags/mongodb/" style="font-size: 11.11px;">mongodb</a> <a href="/tags/nodejs/" style="font-size: 15.56px;">nodejs</a> <a href="/tags/oocss/" style="font-size: 10px;">oocss</a> <a href="/tags/osx/" style="font-size: 14.44px;">osx</a> <a href="/tags/package-manager/" style="font-size: 15.56px;">package manager</a> <a href="/tags/php/" style="font-size: 11.11px;">php</a> <a href="/tags/postgresql/" style="font-size: 10px;">postgresql</a> <a href="/tags/rack-server/" style="font-size: 10px;">rack server</a> <a href="/tags/raspberry-pi/" style="font-size: 10px;">raspberry-pi</a> <a href="/tags/react-native/" style="font-size: 10px;">react native</a> <a href="/tags/reactjs/" style="font-size: 18.89px;">reactjs</a> <a href="/tags/redux/" style="font-size: 10px;">redux</a> <a href="/tags/ruby/" style="font-size: 16.67px;">ruby</a> <a href="/tags/sass/" style="font-size: 11.11px;">sass</a> <a href="/tags/selenium/" style="font-size: 10px;">selenium</a> <a href="/tags/slim/" style="font-size: 10px;">slim</a> <a href="/tags/ssl/" style="font-size: 10px;">ssl</a> <a href="/tags/task-runner/" style="font-size: 12.22px;">task runner</a> <a href="/tags/vuejs/" style="font-size: 12.22px;">vuejs</a> <a href="/tags/webpack/" style="font-size: 12.22px;">webpack</a> <a href="/tags/windows/" style="font-size: 10px;">windows</a> <a href="/tags/xml/" style="font-size: 10px;">xml</a>
        </div>
    </div>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2016 andyyou(You,ZongYan)
        </div>
    </div>
</footer>

        

    
        <script src="/vendor/lightgallery/js/lightgallery.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-pager.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-hash.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-share.min.js"></script>
        <script src="/vendor/lightgallery/js/lg-video.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>