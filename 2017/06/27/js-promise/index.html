<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>Promise 學習筆記 | DEVLOG of andyyou</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="這篇文章主要是為了複習與更加深入掌握 Javascript Promise 而產生的筆記。在直接閱讀關於 Promise A+ 或原理說明之前先通過比喻的方式理解可以更加深記憶。如果您對於 Promise 還是有點似懂非懂，不妨可以看看。">
<meta name="keywords" content="javascript">
<meta property="og:type" content="article">
<meta property="og:title" content="Promise 學習筆記">
<meta property="og:url" content="//andyyou.github.io/2017/06/27/js-promise/index.html">
<meta property="og:site_name" content="DEVLOG of andyyou">
<meta property="og:description" content="這篇文章主要是為了複習與更加深入掌握 Javascript Promise 而產生的筆記。在直接閱讀關於 Promise A+ 或原理說明之前先通過比喻的方式理解可以更加深記憶。如果您對於 Promise 還是有點似懂非懂，不妨可以看看。">
<meta property="og:updated_time" content="2017-06-27T09:53:32.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Promise 學習筆記">
<meta name="twitter:description" content="這篇文章主要是為了複習與更加深入掌握 Javascript Promise 而產生的筆記。在直接閱讀關於 Promise A+ 或原理說明之前先通過比喻的方式理解可以更加深記憶。如果您對於 Promise 還是有點似懂非懂，不妨可以看看。">
    

    

    
        <link rel="icon" href="/images/favicon.png" />
    

    <link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/lib/open-sans/styles.css">
    <link rel="stylesheet" href="/lib/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/lib/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/lib/lightgallery/css/lightgallery.min.css">
    
    
    
        <script type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-39208536-1', 'auto');
ga('send', 'pageview');

</script>
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">DEVLOG of andyyou</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories">Categories</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="https://avatars2.githubusercontent.com/u/665690?v=3&amp;s=466" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜尋" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: 'Pages',
            CATEGORIES: '分類',
            TAGS: '標籤',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories">Categories</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜尋" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="https://avatars2.githubusercontent.com/u/665690?v=3&amp;s=466" />
            <h2 id="name">andyyou</h2>
            <h3 id="title">Web Developer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Taipei, Taiwan</span>
            <a id="follow" target="_blank" href="https://github.com/andyyou">關注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                154
                <span>文章</span>
            </div>
            <div class="article-info-block">
                63
                <span>標籤</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/andyyou" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://www.linkedin.com/pub/zongyan-you/2a/493/16" target="_blank" title="linkedin" class=tooltip>
                            <i class="fa fa-linkedin"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-js-promise" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            Promise 學習筆記
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/06/27/js-promise/">
            <time datetime="2017-06-27T09:53:32.000Z" itemprop="datePublished">2017-06-27</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/Program/">Program</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/javascript/">javascript</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>這篇文章主要是為了複習與更加深入掌握 <code>Javascript Promise</code> 而產生的筆記。在直接閱讀關於 Promise A+ 或原理說明之前先通過比喻的方式理解可以更加深記憶。如果您對於 Promise 還是有點似懂非懂，不妨可以看看。</p>
<a id="more"></a>
<h1 id="理解-Promise"><a href="#理解-Promise" class="headerlink" title="理解 Promise"></a>理解 Promise</h1><p>Promise 簡單來說：</p>
<p>想像一下你是個孩子，你媽<code>承諾(Promise)</code>你下個禮拜會送你一隻新手機。</p>
<p>現在你並不知道下個禮拜你會不會拿到手機。你媽可能真的買了新手機給你，或者因為你惹她不開心而取消了這個承諾。</p>
<p>這就是一個 <code>Promise</code>，一個 Promise 有三種狀態：</p>
<ol>
<li><code>pending</code> 未發生、等待的狀態。到下週前，你還不知道這件事會怎樣。</li>
<li><code>resolved</code> 完成/履行承諾。你媽真的買了手機給你。</li>
<li><code>rejected</code> 拒絕承諾。沒收到手機，因為你惹她不開心而取消了這個承諾。</li>
</ol>
<p>總結來說狀態有 <code>等待</code>、<code>成功</code>、<code>失敗</code>，使用情境就是我們<code>當前還不知道結果，需要等待結果發生才繼續後續的處理</code>。</p>
<h1 id="建立一個-Promise"><a href="#建立一個-Promise" class="headerlink" title="建立一個 Promise"></a>建立一個 Promise</h1><p>看完上面的比喻讓我們對應到 Javascript。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">var isMomHappy = false</div><div class="line"></div><div class="line">var willIGetNewPhone = new Promise(function (resolve, reject) &#123;</div><div class="line">  if (isMomHappy) &#123;</div><div class="line">    var phone = &#123;</div><div class="line">      brand: &apos;Samsung&apos;,</div><div class="line">      color: &apos;black&apos;,</div><div class="line">      type: &apos;s8&apos;</div><div class="line">    &#125;</div><div class="line">    resolve(phone)</div><div class="line">  &#125; else &#123;</div><div class="line">    var reason = new Error(&apos;Mom is unhappy&apos;)</div><div class="line">    reject(reason)</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>上面這段程式碼應該已經充分解釋概略的觀念。</p>
<ul>
<li>第一行我們使用一個 Boolean <code>isMomHappy</code> 定義媽媽是否開心。</li>
<li>我們宣告一個 Promise <code>willIGetNewPhone</code>。這個 Promise 可能是被<code>履行(resolved)</code>又或者<code>拒絕(rejected)</code>。</li>
<li>Promise 標準的語法可以參考 <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="external">MDN</a></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>我們需要記得的是如果一個 Promise 執行成功要在內部 function 呼叫 <code>resolve(成功結果)</code>，如果結果是失敗則呼叫 <code>reject(失敗結果)</code>。在我們的範例中如果媽媽開心，我們將得到手機因此我們執行 <code>reslove(phone)</code>，如果媽媽不高興則執行 <code>reject(reason)</code>。</li>
</ul>
<blockquote>
<p>一個 Promise 物件表達的是一件非同步的操作最終的結果，可以是<code>成功</code>或<code>失敗</code>。</p>
</blockquote>
<h1 id="使用-Promise"><a href="#使用-Promise" class="headerlink" title="使用 Promise"></a>使用 Promise</h1><p>到這一步我們已經有了一個 Promise，讓我們接著來使用它。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> askMom = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  willIGetNewPhone</div><div class="line">    .then(<span class="function"><span class="keyword">function</span> (<span class="params">fulfilled</span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(fulfilled)</div><div class="line">    &#125;)</div><div class="line">    .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(error.message)</div><div class="line">    &#125;)</div><div class="line">&#125;</div><div class="line">askMom()</div></pre></td></tr></table></figure>
<ol>
<li>首先我們有個 function 叫 <code>askMom</code> 在這個 function 中，我們將利用 Promise <code>willIGetNewPhone</code>。</li>
<li>我們希望一旦<code>等待的結果發生時</code>可以採取對應的動作，我們可以使用 <code>.then</code> 或 <code>.catch</code> 來執行對應的行為。</li>
<li>在這個範例中，我們在 <code>.then</code> 中使用 <code>function (fulfilled){}</code>，而這個 <code>fulfilled</code> 就是從 Promise 的 <code>resolve(成功結果)</code> 傳來的結果，範例中這個結果就是 <code>phone</code> 物件。</li>
<li>在 <code>.catch</code> 中我們使用了 <code>function (error) {}</code>。而這個 <code>error</code> 就是從 Promise 的 <code>reject(失敗結果)</code> 傳來的即 <code>reason</code>。</li>
</ol>
<ul>
<li><a href="https://jsfiddle.net/3jkev2w1/1/" target="_blank" rel="external">範例</a></li>
</ul>
<h1 id="鏈式調用-Promise"><a href="#鏈式調用-Promise" class="headerlink" title="鏈式調用 Promise"></a>鏈式調用 Promise</h1><p>Promise 是可串連的。</p>
<p>假如你<code>承諾</code>您的朋友，如果你拿到新手機會借他們看看。這又是另一個 <code>Promise</code>。讓我們繼續來撰寫這個範例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> showOff = <span class="function"><span class="keyword">function</span> (<span class="params">phone</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> message = <span class="string">'Hey friend, I have a new '</span> + phone.color + <span class="string">' '</span> + phone.brand + <span class="string">' phone'</span> + phone.type</div><div class="line"></div><div class="line">    resolve(message) </div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ol>
<li>在這個範例，您可能發現到我們根本沒有呼叫 <code>reject</code>，這是可選的，我們可以省略不調用。</li>
<li>另外，我們可以透過使用 <code>Promise.resolve</code> 簡化這個範例。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> showOff = <span class="function"><span class="keyword">function</span> (<span class="params">phone</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> message = <span class="string">'Hey friend, I have a new '</span> + phone.color + <span class="string">' '</span> + phone.brand + <span class="string">' phone '</span> + phone.type</div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(message)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>接著讓我們來看看如何串連 <code>Promise</code>。在 <code>willIGetNewPhone</code> 這個 Promise 之後接續 <code>showOff</code> Promise。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> askMom = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  willIGetNewPhone</div><div class="line">    .then(showOff)</div><div class="line">    .then(<span class="function"><span class="keyword">function</span> (<span class="params">fulfilled</span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(fulfilled)</div><div class="line">      <span class="comment">// 'Hey friend, I have a new black Samsung phone s8'</span></div><div class="line">    &#125;)</div><div class="line">    .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(error.message)</div><div class="line">    &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>這就是 <code>Promise</code> 串連的方式。</p>
<h1 id="非同步"><a href="#非同步" class="headerlink" title="非同步"></a>非同步</h1><p><code>Promise</code> 是非同步的，讓我們在呼叫 Promise 的前後加上 console.log</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> askMom = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'before asking Mom'</span>)</div><div class="line"></div><div class="line">  willIGetNewPhone</div><div class="line">    .then(showOff)</div><div class="line">    .then(<span class="function"><span class="keyword">function</span> (<span class="params">fulfilled</span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(fulfilled)</div><div class="line">    &#125;)</div><div class="line">    .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(error.message)</div><div class="line">    &#125;)</div><div class="line">  </div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'after asking Mom'</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>關於上面這段程式碼，您認為 log 的順序會如何？大概我們會猜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">1. before asking Mom</div><div class="line">2. Hey friend, I have a new black Samsung phone s8</div><div class="line">3. after asking Mom</div></pre></td></tr></table></figure>
<p>然而真正的順序是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">1. before asking Mom</div><div class="line">2. after asking Mom</div><div class="line">3. Hey friend, I have a new black Samsung phone s8</div></pre></td></tr></table></figure>
<p>為什麼？因爲時間是不等人的 XD。這也是我們在寫 JS 的時候非常常見得情況。</p>
<p>想像您還是那個孩子，在你媽決定買手機給你之前難道你就一直待在那等結果嘛！？你應該是跑去玩了吧！<br>這就是我們說的<code>非同步</code>，程式碼不會卡在那等待結果。如果需要等待結果才能繼續處理的部分，我們就把它方到 <code>then</code> 裡面。</p>
<h1 id="ES5，-ES6-ES2015，ES7-Next-的-Promise"><a href="#ES5，-ES6-ES2015，ES7-Next-的-Promise" class="headerlink" title="ES5， ES6/ES2015，ES7/Next 的 Promise"></a>ES5， ES6/ES2015，ES7/Next 的 Promise</h1><h2 id="ES5"><a href="#ES5" class="headerlink" title="ES5"></a>ES5</h2><p>目前主流瀏覽器使用的 JS 版本。上面的範例如果想在全部的瀏覽器運行我們需要加入 Promise 函式庫 - <a href="http://bluebirdjs.com/docs/getting-started.html" target="_blank" rel="external">Bluebird</a>。這是因為 ES5 內建不支援 Promise，當然時至今日已經有許多瀏覽器陸續支援了。</p>
<h2 id="ES6-ES2015"><a href="#ES6-ES2015" class="headerlink" title="ES6/ES2015"></a>ES6/ES2015</h2><p>Nodejs v6+ 開始原生支援 Promise，此外還有 <code>arrow function</code>、<code>const</code> 和 <code>let</code></p>
<p>讓我們來看看 ES6 的程式碼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">const isMomHappy = true</div><div class="line"></div><div class="line">const willIGetNewPhone = new Promise((resolve, reject) =&gt; &#123;</div><div class="line">  if (isMomHappy) &#123;</div><div class="line">    const phone = &#123;</div><div class="line">      brand: &apos;Samsung&apos;,</div><div class="line">      color: &apos;black&apos;,</div><div class="line">      type: &apos;s8&apos;</div><div class="line">    &#125;</div><div class="line">    resolve(phone)</div><div class="line">  &#125; else &#123;</div><div class="line">    const reason = new Error(&apos;Mom is not happy)</div><div class="line">    reject(reason)</div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line">const showOff = function (phone) &#123;</div><div class="line">  const message = &apos;Hey friend, I have a new &apos; + phone.color + &apos; &apos; + phone.brand + &apos; phone &apos; + phone.type</div><div class="line">  return Promise.resolve(message)</div><div class="line">&#125;</div><div class="line"></div><div class="line">const askMom = function () &#123;</div><div class="line">  willIGetNewPhone</div><div class="line">    .then(showOff)</div><div class="line">    .then(fulfilled =&gt; console.log(fulfilled))</div><div class="line">    .catch(error =&gt; console.log(error.message))</div><div class="line">&#125;</div><div class="line"></div><div class="line">askMom()</div></pre></td></tr></table></figure>
<p>看到所有的 <code>var</code> 被換成 <code>const</code> 然後 <code>function</code> 換成 <code>(resolve, reject) =&gt;</code> 關於更深入的介紹可以參考</p>
<ul>
<li><a href="https://strongloop.com/strongblog/es6-variable-declarations/" target="_blank" rel="external">JavaScript ES6 Variable Declarations with let and const</a></li>
<li><a href="https://strongloop.com/strongblog/an-introduction-to-javascript-es6-arrow-functions/" target="_blank" rel="external">An introduction to Javascript ES6 arrow functions</a></li>
</ul>
<h2 id="ES7"><a href="#ES7" class="headerlink" title="ES7"></a>ES7</h2><p>到了 ES7 更引進 <code>async await</code> 讓處理<code>非同步</code>的語法更加簡潔與具備可讀性。 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> isMomHappy = <span class="literal">true</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> willIGetNewPhone = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">if</span> (isMomHappy) &#123;</div><div class="line">    <span class="keyword">const</span> phone = &#123;</div><div class="line">      <span class="attr">brand</span>: <span class="string">'Samsung'</span>,</div><div class="line">      <span class="attr">color</span>: <span class="string">'black'</span>,</div><div class="line">      <span class="attr">type</span>: <span class="string">'s8'</span></div><div class="line">    &#125;</div><div class="line">    resolve(phone)</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">const</span> reason = <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Mom is not happy'</span>)</div><div class="line">    reject(reason)</div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">showOff</span>(<span class="params">phone</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">const</span> message = <span class="string">'Hey friend, I have a new '</span> + phone.color + <span class="string">' '</span> + phone.brand + <span class="string">' phone '</span> + phone.type</div><div class="line">    <span class="keyword">return</span> resolve(message)</div><div class="line">  &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">askMom</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">try</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'before asking Mom'</span>)</div><div class="line">    <span class="keyword">let</span> phone = <span class="keyword">await</span> willIGetNewPhone</div><div class="line">    <span class="keyword">let</span> message = <span class="keyword">await</span> showOff(phone)</div><div class="line">    <span class="built_in">console</span>.log(message)</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'after asking mom'</span>)</div><div class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</div><div class="line">    <span class="built_in">console</span>.log(error.message)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">(<span class="keyword">async</span> () =&gt; &#123;</div><div class="line">  <span class="keyword">await</span> askMom()</div><div class="line">&#125;)()</div></pre></td></tr></table></figure>
<ol>
<li>當我們要在一個 function 中回傳 Promise 時，我們需要在該 function 前加上 <code>async</code> </li>
<li>當我們使用一個 Promise 或者 function 回傳 Promise （async）時需要使用 <code>await</code> 例如 <code>let phone = await willIGetNewPhone</code> 或 <code>let message = await showOff(phone)</code></li>
<li>使用 <code>try {} catch (error) {}</code> 來攔截例外，即 Promise <code>reject</code> 時。</li>
</ol>
<h1 id="為何及何時使用-Promise"><a href="#為何及何時使用-Promise" class="headerlink" title="為何及何時使用 Promise"></a>為何及何時使用 Promise</h1><p>在我們概略的介紹之後您肯定有些疑問，首先是為什麼我們需要 Promise？以及在沒有 Promise 之前的世界又是怎麼樣。在回答這些問題之前讓我先談談一些基礎的東西</p>
<h2 id="Function-與-Async-Function"><a href="#Function-與-Async-Function" class="headerlink" title="Function 與 Async Function"></a>Function 與 Async Function</h2><p>讓我們先來看看範例：使用函式來加總兩個數字</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 普通的函式加總兩數</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span> (<span class="params">num1, num2</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> num1 + num2</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> result = add(<span class="number">1</span>, <span class="number">2</span>)</div><div class="line"><span class="comment">// result 為 3</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 呼叫遠端函式加總兩數</span></div><div class="line"><span class="keyword">const</span> result = getAddResultFromServer(<span class="string">'http://example.com?num1=1&amp;num2=2'</span>)</div><div class="line"></div><div class="line"><span class="comment">// result 會是 undefined</span></div></pre></td></tr></table></figure>
<p>如果我們在本地端加總兩數，基本上我們會立刻得到其值，然而如果是透過遠端執行（呼叫 API)則需要等待其回應，不會立刻得到值。<br>或者這麼說，我們其實不知道 server 需要多久時間，甚至是否正常運作等等，這種情況下我們又不希望介面操作卡在這邊等待。於是像調用 API，下載檔案，讀檔等這些會需要花點時間的操作，在 JS 中通常都是使用非同步的機制來處理。</p>
<p>在 Promise 出現之前：</p>
<p>難道我們一定要用 Promise 來處理非同步嗎？不是，在 Promise 出現之前我們已經有個方式處理 - Callback。所謂的 Callback 就是一個 function ，當我們調用非同步的 function 時，我們把它當作參數一起傳出去，當非同步的處理完成後，會把結果丟進這個 function 繼續處理。讓我們來看看範例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addAsync</span> (<span class="params">num1, num2, callback</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> $.getJSON(<span class="string">'http://example.com'</span>, &#123;</div><div class="line">    <span class="attr">num1</span>: num1,</div><div class="line">    <span class="attr">num2</span>: num2</div><div class="line">  &#125;, callback)</div><div class="line">&#125;</div><div class="line"></div><div class="line">addAsync(<span class="number">1</span>, <span class="number">2</span>, success =&gt; &#123;</div><div class="line">  <span class="keyword">const</span> result = success <span class="comment">// 取得結果為 3</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>目前這個範例看起來還OK啊，為什麼我們需要 Promise？</p>
<h1 id="假如我們需要連續處理多個非同步的行為？"><a href="#假如我們需要連續處理多個非同步的行為？" class="headerlink" title="假如我們需要連續處理多個非同步的行為？"></a>假如我們需要連續處理多個非同步的行為？</h1><p>現在假如我們不是只有相加兩數，我們想要相加 3 次，如下這個情況</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> resultA, resultB, resultC</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span> (<span class="params">num1, num2</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> num1 + num2</div><div class="line">&#125;</div><div class="line"></div><div class="line">resultA = add(<span class="number">1</span>,<span class="number">2</span>)</div><div class="line">resultB = add(resultA, <span class="number">3</span>)</div><div class="line">resultC = add(resultB, <span class="number">4</span>)</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="string">'total'</span>, resultC)</div><div class="line"><span class="built_in">console</span>.log(resultA, resultB, resultC)</div></pre></td></tr></table></figure>
<p>如果是上面這個情況使用 callback 呢？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> resutlA, resultB, resultC</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addAsync</span> (<span class="params">num1, num2, callback</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> $.getJSON(<span class="string">'http://example.com'</span>, &#123;</div><div class="line">    <span class="attr">num1</span>: num1,</div><div class="line">    <span class="attr">num2</span>: num2</div><div class="line">  &#125;, callback)</div><div class="line">&#125;</div><div class="line"></div><div class="line">addAsync(<span class="number">1</span>, <span class="number">2</span>, <span class="function"><span class="keyword">function</span> (<span class="params">success</span>) </span>&#123;</div><div class="line">  resultA = success</div><div class="line"></div><div class="line">  addAsync(resultA, <span class="number">3</span>, <span class="function"><span class="keyword">function</span> (<span class="params">success</span>) </span>&#123;</div><div class="line">    resultB = success</div><div class="line"></div><div class="line">    addAsync(resultB, <span class="number">4</span>, <span class="function"><span class="keyword">function</span> (<span class="params">success</span>) </span>&#123;</div><div class="line">      resultC = success</div><div class="line"></div><div class="line">      <span class="built_in">console</span>.log(<span class="string">'total'</span>, resultC)</div><div class="line">      <span class="built_in">console</span>.log(resultA, resultB, resultC)</div><div class="line">    &#125;)</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>這樣不斷內嵌的語法看起來就不是這麼友善了，在實務上我們非常容易遇到這個情形，例如：需要先使用 API 取得帳號資料，接著該帳戶的訂單，再取出某筆訂單的詳細資料。像上面這樣的程式碼通常人們稱為 <code>callback hell</code> 因為我們需要不斷的內嵌 callback，想像一下如果我們需要 10 層 callback 那會怎樣！</p>
<h1 id="逃離回呼地獄（Callback-Hall）"><a href="#逃離回呼地獄（Callback-Hall）" class="headerlink" title="逃離回呼地獄（Callback Hall）"></a>逃離回呼地獄（Callback Hall）</h1><p>在大部分的程式語言中您比較少機會遇到這樣的問題，主要是因為它們以同步的機制為主，但在大量使用非同步的 JS 中我們就需要解決這個問題了。於是 Promise 就是為了解決這個問題而產生的。讓我們再來看看 Promise 的版本。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">let resultA, resultB, resultC</div><div class="line"></div><div class="line">function addAsync (num1, num2) &#123;</div><div class="line">  // fetch API 會回傳一個 Promise</div><div class="line">  return fetch(`http://example.com?num1=$&#123;num1&#125;&amp;num2=$&#123;num2&#125;`)</div><div class="line">    .then(x =&gt; x.json())</div><div class="line">&#125;</div><div class="line"></div><div class="line">addAsync(1, 2)</div><div class="line">  .then(success =&gt; &#123;</div><div class="line">    resultA = success</div><div class="line">    return resultA</div><div class="line">  &#125;)</div><div class="line">  .then(success =&gt; addAsync(success, 3))</div><div class="line">  .then(success =&gt; &#123;</div><div class="line">    resultB = success</div><div class="line">    return resultB</div><div class="line">  &#125;)</div><div class="line">  .then(success =&gt; addAsync(success, 4))</div><div class="line">  .then(success =&gt; &#123;</div><div class="line">    resultC = success</div><div class="line">    return resultC</div><div class="line">  &#125;)</div><div class="line">  .then(success =&gt; &#123;</div><div class="line">    console.log(&apos;total&apos;, success)</div><div class="line">    console.log(resultA, resultB, resultC)</div><div class="line">  &#125;)</div></pre></td></tr></table></figure>
<p>透過 Promise 我們使用 <code>.then</code> 把 <code>callback hall</code> 不斷內嵌的語法給攤平了。</p>
<h1 id="後起之秀-Observables"><a href="#後起之秀-Observables" class="headerlink" title="後起之秀 - Observables"></a>後起之秀 - Observables</h1><p>在我們決定使用 Promise 之前，其實還有一個也是用來處理上面這些問題的新方法 <code>Observables</code>。</p>
<blockquote>
<p>Observable 是 lazy event stream 可以觸發 0 到 多個事件，這些事件也不見得需要完成。</p>
</blockquote>
<p>相比，Observable 和 Promise 相比，主要的差異為：</p>
<ul>
<li>Observable 是可以被取消的。</li>
<li>Observable 在需要時才會執行。</li>
</ul>
<p>下面是使用 RxJS 的範例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> Observable = Rx.Observable</div><div class="line"><span class="keyword">let</span> resultA, resultB, resultC</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addAsync</span> (<span class="params">num1, num2</span>) </span>&#123;</div><div class="line">  <span class="keyword">const</span> promise = fetch(<span class="string">`http://example.com?num1=<span class="subst">$&#123;num1&#125;</span>&amp;num2=<span class="subst">$&#123;num2&#125;</span>`</span>)</div><div class="line">    .then(<span class="function"><span class="params">x</span> =&gt;</span> x.json())</div><div class="line">  <span class="keyword">return</span> Observable.fromPromise(promise)</div><div class="line">&#125;</div><div class="line"></div><div class="line">addAsync(<span class="number">1</span>, <span class="number">2</span>)</div><div class="line">  .do(<span class="function"><span class="params">x</span> =&gt;</span> resultA = x)</div><div class="line">  .flatMap(<span class="function"><span class="params">x</span> =&gt;</span> addAsync(x, <span class="number">3</span>))</div><div class="line">  .do(<span class="function"><span class="params">x</span> =&gt;</span> resultB = x)</div><div class="line">  .flatMap(<span class="function"><span class="params">x</span> =&gt;</span> addAsync(x, <span class="number">4</span>))</div><div class="line">  .do(<span class="function"><span class="params">x</span> =&gt;</span> resultC = x)</div><div class="line">  .subscribe(<span class="function"><span class="params">x</span> =&gt;</span> &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'total'</span>, x)</div><div class="line">    conosle.log(resultA, resultB, resultC)</div><div class="line">  &#125;)</div></pre></td></tr></table></figure>
<ul>
<li><code>Observable.fromPromise</code> 會將 Promise 轉換成 observable stream。</li>
<li><code>.do</code> 和 <code>.flatMap</code> 是 Observable 的運算子。</li>
<li>所謂的需要時才執行（<code>lazy</code>）意思是當我們呼叫 <code>.subscribe</code> 時才會開始執行。</li>
</ul>
<p>Observable 可以將一些複雜的處理流程變的容易。舉例來說我們可以只用一行程式碼去 <code>delay</code> 延遲相加函式 3 秒</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">addAsync(<span class="number">1</span>, <span class="number">2</span>)</div><div class="line">  .delay(<span class="number">3000</span>)</div><div class="line">  .do(<span class="function"><span class="params">x</span> =&gt;</span> resultA = x)</div></pre></td></tr></table></figure>
        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="//andyyou.github.io/2017/06/27/js-promise/" data-id="cj5t8o8ij00f3iqwxq1cf4m6c" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2017/07/10/rails-webpacker-with-foundation/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">上一篇</strong>
            <div class="article-nav-title">
                
                    使用 Rails Webpacker 安裝 Foundation 6
                
            </div>
        </a>
    
    
        <a href="/2017/06/27/e-invoce-setup/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">電子發票系統安裝</div>
        </a>
    
</nav>


    
</article>


    
    <section id="comments">
    
    </section>

</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">分類</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Cloud/">Cloud</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Fun/">Fun</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mobile/">Mobile</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Program/">Program</a><span class="category-list-count">112</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/System/">System</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tools/">Tools</a><span class="category-list-count">16</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">歸檔</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">十二月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">十一月 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">十月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">九月 2014</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">八月 2014</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">二月 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">一月 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">十一月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">十月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">九月 2013</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">八月 2013</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/03/">三月 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/03/">三月 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/01/">一月 2012</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/11/">十一月 2011</a><span class="archive-list-count">3</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">標籤</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/net-mvc/">.net mvc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RoR/">RoR</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/api/">api</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aws/">aws</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/azure/">azure</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bot/">bot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bundler/">bundler</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cache/">cache</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/carrier-wave/">carrier wave</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/centos/">centos</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chrome/">chrome</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cloudflare/">cloudflare</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/compass/">compass</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/devise/">devise</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/">docker</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/e-invoice/">e-invoice</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/entity-framework/">entity framework</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/">es6</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/facebook/">facebook</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flux/">flux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/framework/">framework</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grunt/">grunt</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gulp/">gulp</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heroku/">heroku</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iisexpress/">iisexpress</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios/">ios</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">59</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript-express-passport/">javascript express passport</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jekyll/">jekyll</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jspm/">jspm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jwt/">jwt</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mechanism/">mechanism</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oocss/">oocss</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/osx/">osx</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/package-manager/">package manager</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/postgresql/">postgresql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/queue/">queue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rabbitmq/">rabbitmq</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rack-server/">rack server</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rails/">rails</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/raspberry-pi/">raspberry-pi</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-native/">react native</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reactjs/">reactjs</a><span class="tag-list-count">31</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redux/">redux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ruby/">ruby</a><span class="tag-list-count">15</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sass/">sass</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/selenium/">selenium</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/slim/">slim</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssl/">ssl</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svg-javascript/">svg javascript</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/task-runner/">task runner</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuejs/">vuejs</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/">windows</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xml/">xml</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">標籤雲</h3>
        <div class="widget tagcloud">
            <a href="/tags/net-mvc/" style="font-size: 10px;">.net mvc</a> <a href="/tags/RoR/" style="font-size: 17px;">RoR</a> <a href="/tags/api/" style="font-size: 10px;">api</a> <a href="/tags/aws/" style="font-size: 10px;">aws</a> <a href="/tags/azure/" style="font-size: 11px;">azure</a> <a href="/tags/bot/" style="font-size: 10px;">bot</a> <a href="/tags/bundler/" style="font-size: 11px;">bundler</a> <a href="/tags/cache/" style="font-size: 10px;">cache</a> <a href="/tags/carrier-wave/" style="font-size: 11px;">carrier wave</a> <a href="/tags/centos/" style="font-size: 10px;">centos</a> <a href="/tags/chrome/" style="font-size: 10px;">chrome</a> <a href="/tags/cloudflare/" style="font-size: 10px;">cloudflare</a> <a href="/tags/compass/" style="font-size: 10px;">compass</a> <a href="/tags/css/" style="font-size: 18px;">css</a> <a href="/tags/devise/" style="font-size: 10px;">devise</a> <a href="/tags/docker/" style="font-size: 11px;">docker</a> <a href="/tags/e-invoice/" style="font-size: 10px;">e-invoice</a> <a href="/tags/entity-framework/" style="font-size: 10px;">entity framework</a> <a href="/tags/es6/" style="font-size: 12px;">es6</a> <a href="/tags/facebook/" style="font-size: 10px;">facebook</a> <a href="/tags/flux/" style="font-size: 10px;">flux</a> <a href="/tags/framework/" style="font-size: 11px;">framework</a> <a href="/tags/grunt/" style="font-size: 13px;">grunt</a> <a href="/tags/gulp/" style="font-size: 12px;">gulp</a> <a href="/tags/heroku/" style="font-size: 13px;">heroku</a> <a href="/tags/html/" style="font-size: 11px;">html</a> <a href="/tags/iisexpress/" style="font-size: 10px;">iisexpress</a> <a href="/tags/ios/" style="font-size: 12px;">ios</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/javascript-express-passport/" style="font-size: 10px;">javascript express passport</a> <a href="/tags/jekyll/" style="font-size: 11px;">jekyll</a> <a href="/tags/jspm/" style="font-size: 10px;">jspm</a> <a href="/tags/jwt/" style="font-size: 10px;">jwt</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/mechanism/" style="font-size: 10px;">mechanism</a> <a href="/tags/mongodb/" style="font-size: 11px;">mongodb</a> <a href="/tags/node/" style="font-size: 10px;">node</a> <a href="/tags/nodejs/" style="font-size: 16px;">nodejs</a> <a href="/tags/oocss/" style="font-size: 10px;">oocss</a> <a href="/tags/osx/" style="font-size: 15px;">osx</a> <a href="/tags/package-manager/" style="font-size: 15px;">package manager</a> <a href="/tags/php/" style="font-size: 11px;">php</a> <a href="/tags/postgresql/" style="font-size: 10px;">postgresql</a> <a href="/tags/queue/" style="font-size: 10px;">queue</a> <a href="/tags/rabbitmq/" style="font-size: 10px;">rabbitmq</a> <a href="/tags/rack-server/" style="font-size: 10px;">rack server</a> <a href="/tags/rails/" style="font-size: 11px;">rails</a> <a href="/tags/raspberry-pi/" style="font-size: 10px;">raspberry-pi</a> <a href="/tags/react-native/" style="font-size: 10px;">react native</a> <a href="/tags/reactjs/" style="font-size: 19px;">reactjs</a> <a href="/tags/redux/" style="font-size: 10px;">redux</a> <a href="/tags/ruby/" style="font-size: 17px;">ruby</a> <a href="/tags/sass/" style="font-size: 11px;">sass</a> <a href="/tags/selenium/" style="font-size: 10px;">selenium</a> <a href="/tags/slim/" style="font-size: 10px;">slim</a> <a href="/tags/ssl/" style="font-size: 10px;">ssl</a> <a href="/tags/svg-javascript/" style="font-size: 12px;">svg javascript</a> <a href="/tags/task-runner/" style="font-size: 12px;">task runner</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a> <a href="/tags/vuejs/" style="font-size: 14px;">vuejs</a> <a href="/tags/webpack/" style="font-size: 13px;">webpack</a> <a href="/tags/windows/" style="font-size: 10px;">windows</a> <a href="/tags/xml/" style="font-size: 10px;">xml</a>
        </div>
    </div>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 andyyou(You,ZongYan)
        </div>
    </div>
</footer>

        

    
        <script src="/lib/lightgallery/js/lightgallery.min.js"></script>
        <script src="/lib/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/lib/lightgallery/js/lg-pager.min.js"></script>
        <script src="/lib/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/lib/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/lib/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/lib/lightgallery/js/lg-hash.min.js"></script>
        <script src="/lib/lightgallery/js/lg-share.min.js"></script>
        <script src="/lib/lightgallery/js/lg-video.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>